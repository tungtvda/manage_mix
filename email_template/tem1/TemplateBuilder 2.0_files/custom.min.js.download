$(document).ready(function(){function g(a,b,c){if(a=a||"wait",b=b||"Massage alert",c=!!c||c,$(".alert-symbol > *").remove(),$(".alert-content").html(b),h(a),c)$(".alert-container").addClass("alert-show");else{clearTimeout(d);var d=setTimeout(function(){$(".alert-container").removeClass("alert-show")},1e3);clearTimeout(e);var e=setTimeout(function(){$(".alert-content").html(""),$(".alert-symbol > *").remove()},2500)}}function h(a){if("wait"==a)k();else{$(".alert-symbol").append('<div class="symbol"></div>'),$(".symbol").addClass("s-"+a)}}function k(){$(".alert-symbol").append('<div id="squaresWaveG">\t\t\t\t<div id="squaresWaveG_1" class="squaresWaveG"></div>\t\t\t\t<div id="squaresWaveG_2" class="squaresWaveG"></div>\t\t\t\t<div id="squaresWaveG_3" class="squaresWaveG"></div>\t\t\t\t<div id="squaresWaveG_4" class="squaresWaveG"></div>\t\t\t\t<div id="squaresWaveG_5" class="squaresWaveG"></div>\t\t\t\t<div id="squaresWaveG_6" class="squaresWaveG"></div>\t\t\t\t<div id="squaresWaveG_7" class="squaresWaveG"></div>\t\t\t\t<div id="squaresWaveG_8" class="squaresWaveG"></div>\t\t\t\t</div>')}function l(){if("demo"==c)dataTemplate="",TemplateName="demo",imagePath="item/"+b+"/images_demo",tempPath="item/"+b+"/",m();else{var a=pathURL.split("build").join("data");$.ajax({url:a,type:"POST",data:{id:b},dataType:"json"}).done(function(a){"no data"==a?window.parent.location=pathURL:(dataTemplate=a[0],TemplateName=a[1],imagePath=a[2]+"images",tempPath=a[2],all_Templates=a[3],m())})}}function m(){var a=pathURL.split("build").join("getfile");$.ajax({url:a,type:"POST",data:{isShow:c,tempID:b,tempName:d},dataType:"json"}).done(function(a){"no data"==a?window.parent.location=pathURL:(all_Templates=a[0],all_layouts=a[1],"demo"==c&&(demo_Template=a[2]),n())})}function n(){window.showEditor=!1,version=2,firstLoad=!1,firstLoadDemo=!1,offposi=0,tempTotal=-1,templateHTML={},OldSelect="",preImage={},imgPreview=[],preImageLoadTotal=0,colorArr=[],labelArr=[],arrW=[],arrX=[],demo_html="",cssStyle="",linkFont="",onAreaButton=!1,areaWidth=$(".area-template").width(),windowHeight=$(window).height()<700?720:$(window).height(),buttonCreated=!1,anyFonts="",array_fonts=[],_content_css="",_webfonts={},linkFonts="",3==version&&(app=new ElementsManager),ab(),q(),r(),qa(),L(),Q(all_Templates[Object.keys(all_Templates)[0]]),$(".container_tempate").append('<div class="area"></div>'),w(),$(document).on("click","#sortable a",function(a){a.preventDefault()}),3!=version?(Ya(),Cb(),o()):app.init()}function o(){$(document).on("mouseenter","#sortable td[height]:not([style*=font-family])",function(a){0===$(this).children().length&&($(this).addClass("space-hover"),$(this).find(".resizable-helper-height").show(),$(this).resizable({disabled:!1,handles:"s",minHeight:1,resize:function(a,b){$(".resizable-helper-height").text("Drag : "+$(b.element).attr("height")+"px"),$(b.element).attr("height",b.size.height)}}),$(this).find(".resizable-helper-height").is(".resizable-helper-height")||$(this).find(".ui-resizable-handle").append('<div class="resizable-helper-height">Drag : '+$(this).attr("height")+"px</div>"),Na($(".area-template"),!1),obj_duplicate=$(this).closest("[edit-duplicate]"),$(obj_duplicate).is("[edit-duplicate]")&&(pad=Na(obj_duplicate,!0)))}),$(document).on("mouseleave","#sortable .space-hover",function(a){$(this).removeClass("space-hover"),$(this).find(".resizable-helper-height").hide(),$(this).resizable("destroy")})}function q(){var a={didAnimated:!1,widthDefault:$("#menu_container").width(),widthCollapse:48,animateTime:300};$("#collapse").click(function(){a.didAnimated?(a.didAnimated=!1,$("#collapse > img").animate({borderSpacing:0},{step:function(a,b){$(this).css("-webkit-transform","rotate("+a+"deg)"),$(this).css("-moz-transform","rotate("+a+"deg)"),$(this).css("transform","rotate("+a+"deg)")},duration:"slow"},"linear"),$("#menu_container").animate({width:a.widthDefault},a.animateTime,function(){$("#menu_container a").css({display:"inline-block"})})):(a.didAnimated=!0,$("#collapse > img").animate({borderSpacing:180},{step:function(a,b){$(this).css("-webkit-transform","rotate("+a+"deg)"),$(this).css("-moz-transform","rotate("+a+"deg)"),$(this).css("transform","rotate("+a+"deg)")},duration:"slow"},"linear"),$("#menu_container").animate({width:a.widthCollapse},a.animateTime,function(){}))})}function r(){submenu={show:0,hide:$("#submenu_option").width(),animateTime:500,activeName:$(".menu:first").attr("title"),menuActive:$(".menu:first")},e_layout=$("#menu_container ul > li[title='Edit Styles']"),e_style=$("#menu_container ul > li[title='Edit Styles']"),e_export=$("#menu_container ul > li[title='Export Template']"),e_save=$("#menu_container ul > li[title='Save Template']"),e_layout.css({position:"relative"}),e_style.css({position:"relative"}),e_export.css({position:"relative"}),e_save.css({position:"relative"}),K(!1),$(".menu:first").addClass("activeMenu"),$(".menu").click(function(){v($(this),$(this).attr("title"))}),$(".menu-save").click(function(a){"demo"==c?s():H(a)}),$(".menu-preview").click(function(){var a=parseInt($(".area-template #sortable > li").length);$(".area-template #sortable > li").each(function(b){$(".template").append($(this).html()),b==a-1&&(version,t($(".template").html()),$(".template").html(""))})})}function s(){$(".container_main").addClass("bgblur"),$(".popup_container").addClass("show_popup"),$(".popup_container .btn_keep").removeClass("btn_keep"),$(".popup_container .btn_include").removeClass("btn_include"),$(".popup_container").click(function(a){a.target==this&&($(".container_main").removeClass("bgblur"),$(".popup_container").removeClass("show_popup"))}),$(".btn_buy").click(function(a){a.target==this&&(parent.location=urlDemo)}),$(".btn_cancel").click(function(a){a.target==this&&($(".container_main").removeClass("bgblur"),$(".popup_container").removeClass("show_popup"))})}function t(a){$(".border-text-float, .area-button , .border-element-float,.circle-button-add,.circle-button-remove,.button ,.border-duplicate , .area-button ").remove(),$(".area-template").find(".area-box").removeClass("area-box"),$(".container_preview").addClass("preview_anima");var b=document.createElement("iframe");$(".preview_area").append(b);var c=b.contentDocument;c.open(),c.write('<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">'),c.write("<head></head>"),c.write("<body></body>"),c.write("</html>"),c.close(),iPreview=$(".preview_area iframe").contents(),$(iPreview).find("body").css({"font-size":12}),$(iPreview).find("body").append(a),$(iPreview).find("body").find("table").each(function(){}),$(iPreview).find(".hide-image").remove();var d=$(".con-style > link").is("link")?$(".con-style > link")[0].outerHTML:"";$(iPreview).find("head").append(d);var e=$(iPreview).find("head");$(e).append(selects.cssStyle);var f=$(e).find("style").text().replace(/[\n\r]+/g,"").replace(/\/\*[^\/\*]+\*\//g,"");$(e).find("style").text(f),$(iPreview).find("style").append("@media only screen and (min-width: 850px){table{display:none!important;}}"),$(iPreview).find("body > table").each(function(){$(this).attr("width","100%").css({width:"100%"})}),$(iPreview).find("a").click(function(){return!1}),$(iPreview).find("*").each(function(){$(this).is("[image-hide]")&&($(this).closest("td").next().is("td")||$(this).closest("td").prev().is("td")?$(this).closest("td").remove():$(this).closest("tr").next().is("tr")||$(this).closest("tr").prev().is("td")?$(this).closest("tr").remove():($(this).parent("a").remove(),$(this).remove()))}),$(iPreview).find("*").each(function(){$(this).removeClass("relative_index1 , relative_index2")});$(iPreview).find("body").htmlCleaner();$(".container_preview").click(function(a){a.target==this&&($(".container_main").removeClass("bgblur"),$(".container_preview").removeClass("preview_anima"),$(".preview_area iframe").remove(),$(".mobile").removeClass("active_mobile"),$(".container_resize").css({width:820}))}),$("#desktop").addClass("desktop"),$("#mobile").addClass("mobile");var i=$(".desktop");$(i).addClass("active_desktop"),$(".mobile").removeClass("active_mobile"),$(".container_resize").css({width:820}),$(".option_p li").click(function(a){var b=800;"desktop"==a.target.id?($(i).removeClass("active_mobile"),$(this).addClass("active_desktop"),i=$(this)):(b=380,$(i).removeClass("active_desktop"),$(this).addClass("active_mobile"),i=$(this)),$(".container_resize").css({width:b})}),preview_T=!0}function v(a,b){"Save Template"!=b&&(b==submenu.activeName?($("#submenu_option").animate({left:submenu.show},submenu.animateTime),a.addClass("activeMenu"),submenu.menuActive=a,submenu.ActiveName=b,"Edit Styles"==b&&$("#submenu_option").animate({left:-(submenu.hide+90)},submenu.animateTime,function(){lb(colorArr)})):($("#submenu_option").animate({left:-(submenu.hide+90)},submenu.animateTime,function(){switch(b){case"Choose Module":J("layout"),K(!1),I(!0),$(".select_template").show();break;case"Edit Styles":J("edit-style"),lb(colorArr);break;case"Save Template":K(!1),I(!0);break;case"Export Template":J("ExportTemplate"),I(!0),K(!1);break;default:J("layout"),K(!1),I(!0)}"Choose Module"==submenu.activeName?$("#submenu_option .slide-box #title_option").text("Drag or click modules"):$("#submenu_option .slide-box #title_option").text(submenu.activeName)}),$(submenu.menuActive).removeClass("activeMenu"),a.addClass("activeMenu"),submenu.menuActive=a,submenu.activeName=b))}function w(){arrExport=["HTML","MailChimp","CampaignMonitor"],$("#ExportTemplate").find(".exportOption").is(".exportOption")||$.each(arrExport,function(a,b){$("#ExportTemplate > #container-Export").append('\t\t\t\t\t<div class="exportOption" id="'+b+'">\t\t\t\t\t<div class="form-item" >\t\t\t\t\t<label for="export" >'+b+'</label>\t\t\t\t\t<div class="button_toggle open_toggle" ></div>\t\t\t\t\t</div>\t\t\t\t\t<div class="option-export">\t\t\t\t\t<div class="box-export-to-desktop" >\t\t\t\t\t<h2>Export to</h2>\t\t\t\t\t<div class="button_export export_desktop" id="'+b+'">Desktop</div>\t\t\t\t\t</div>\t\t\t\t\t</div>\t\t\t\t\t</div>'),"MailChimp"==b&&$("#ExportTemplate  #"+b).find(".option-export").append('<div class="box-send-mailchimp">\t\t\t\t\t<h2>Send to MailChimp</h2>\t\t\t\t\t<label>API KEY</label>\t\t\t\t\t<a href="https://us1.admin.mailchimp.com/account/api-key-popup" target="_blank">( get your api key )</a>\t\t\t\t\t<input type="text" id="apikey_mc" name="apikey_mc" value=""  placeholder="Api key">\t\t\t\t\t<label>Template Name</label>\t\t\t\t\t<input type="text" id="template_name_mc" name="template_name_mc" value="'+d+("demo"==c?"_demo":"")+'" placeholder="Template name">\t\t\t\t\t<span class="quote">* Required for send to MailChimp</span>\t\t\t\t\t<div class="button_export send_to_mailchimp" id="'+b+'">Send to MailChimp</div>\t\t\t\t\t</div>')}),$(".exportOption .form-item").click(function(a){a.currentTarget.className==$(this).attr("class")&&($(this).closest(".exportOption").hasClass("activeExportBtn")?($(".activeExportBtn").find(".option-export").slideToggle(),$(".activeExportBtn").find(".button_toggle").removeClass("close_toggle"),$(".activeExportBtn").find(".button_toggle").addClass("open_toggle"),$(".activeExportBtn").removeClass("activeExportBtn")):($(".activeExportBtn").find(".option-export").slideToggle(),$(".activeExportBtn").find(".button_toggle").removeClass("close_toggle"),$(".activeExportBtn").find(".button_toggle").addClass("open_toggle"),$(".activeExportBtn").removeClass("activeExportBtn"),$(this).closest(".exportOption").addClass("activeExportBtn"),$(this).closest(".exportOption").find(".option-export").slideToggle(),$(this).closest(".exportOption").find(".button_toggle").removeClass("open_toggle"),$(this).closest(".exportOption").find(".button_toggle").addClass("close_toggle")))}),$(".exportOption .send_to_mailchimp").click(function(a){if(a.currentTarget.className==$(this).attr("class"))if(0!=$("#apikey_mc").val().length&&""!=$("#template_name_mc").val()){g("wait","Please wait, System is running",!0),template_html="demo"==c?demo_html:E("MailChimp",!0);var b=pathURL.split("build").join("sendMailChimp");$.ajax({url:b,type:"POST",data:{api_mc:$("#apikey_mc").val(),template_name:$("#template_name_mc").val(),html:template_html,style:cssStyle,linkFont:linkFont},dataType:"text"}).done(function(a){"Send Template Complete"!=a?(z("#apikey_mc",a),g("error",a,!1)):g("success","Template was sent successfully",!1)})}else 0==$("#apikey_mc").val().length&&z("#apikey_mc","Invalid MailChimp API Key"),""==$("#template_name_mc").val()&&z("#template_name_mc","Required template name")}),$("#ExportTemplate .export_desktop").click(function(a){a.currentTarget.className==$(this).attr("class")&&("demo"==c?s():(Za($(".area-template")),Lb(),x($(this).attr("id"))))})}function x(a){$(".btn_include , .btn_keep").unbind("click"),$(".popup_container").addClass("show_popup"),$(".popup_container .btn_buy").addClass("btn_keep"),$(".popup_container .btn_cancel").addClass("btn_include"),$(".popup_container .btn_buy").removeClass("btn_buy"),$(".popup_container .btn_cancel").removeClass("btn_cancel"),$(".popup_container h2").css({"font-size":27,"font-weight":300}),$(".popup_container h2").text("Export your template to desktop"),$(".popup_container p").text('by "keep images online" or "include images folder"'),$(".popup_container .btn_include").text("INCLUDE IMAGES FOLDER"),$(".popup_container .btn_keep").text("KEEP IMAGES ONLINE"),$(".popup_container").click(function(a){a.target==this&&$(".popup_container").removeClass("show_popup")}),$(".btn_include").click(function(b){if(b.target==this){$(".popup_container").removeClass("show_popup"),g("wait","Please wait, System is running",!0),clearTimeout(c);var c=setTimeout(function(){y(a,E(a,!1))},1e3)}}),$(".btn_keep").click(function(b){if(b.target==this){$(".popup_container").removeClass("show_popup"),g("wait","Please wait, System is running",!0),clearTimeout(c);var c=setTimeout(function(){y(a,E(a,!0))},1e3)}})}function y(a,c){if(testSystem)console.log("test System"),E($(this).attr("id"),!1);else{var d=pathURL.split("build").join("exportTemplate");$.ajax({url:d,type:"POST",data:{id:b,html:c,style:cssStyle,linkFont:linkFont,srcImg:arrImgSrc,image:arrImg,fileName:TemplateName,typeFile:a},dataType:"text"}).done(function(a){g("success","Template was zipped already",!1),clearTimeout(b);var b=setTimeout(function(){window.location=pathURL.split("build").join(a)},600);clearTimeout(c);var c=setTimeout(function(){A(a)},3e3)})}}function z(a,b){$(".msn").remove(),$(a).addClass("incorrect"),$(a).after('<span class="msn">'+b+"</span>"),$(a).click(function(){$(a).removeClass("incorrect"),$(".msn").remove()})}function A(a){var b=pathURL.split("build").join("deleteTemplate");$.ajax({url:b,type:"POST",data:{delFile:a},dataType:"text"}).done(function(a){})}function E(a,b){X("active"),$(".template").html(selects.html),$(".border-text-float,\t\t\t.border-element-float,\t\t\t.circle-button-add,\t\t\t.circle-button-remove,\t\t\t.button,\t\t\t.border-duplicate,\t\t\t.area-button").remove(),$(".area-template").find(".area-box").removeClass("area-box"),$("body").append('<div class="buildTemplate"></div>');var d=($(".template").find("table:first"),"#efefef");$("#sortable").find("td[height]").not("td[style*=font-family]").each(function(){$(this).css({height:$(this).height()+"px","line-height":$(this).height()+"px","font-size":$(this).height()+"px"})}),arrImg=[],arrImgSrc=[],removePathFromSrc=window.parent.location.href.split("/build")[0]+"/";var e="body{background-color:"+d+';} .default-edit-image{height:20px;} tr.tpl-repeatblock , tr.tpl-repeatblock > td{ display:block !important;} .tpl-repeatblock {padding: 0px !important;border: 1px dotted rgba(0,0,0,0.2);} table[width="595"]{width:100% !important;}';if($(".template").find("style").append(e),cssStyle=$(".template").find("style").text(),linkFont=$(".con-style").find("link").length?'<link href="'+$(".con-style").find("link")[0].href+'" rel="stylesheet" type="text/css">':"",$(".area-template  span , .area-template  a").each(function(){$(this).is("[style*='font-size']")||$(this).css({"font-size":"inherit"})}),"MailChimp"==a)var f='<table id="mainStructure" width="800" class="full-width" align="center" border="0" cellspacing="0" cellpadding="0" style="background-color:'+d+'; width:800px; max-width: 800px; margin: 0 auto; outline: 1px solid #efefef; box-shadow: 0px 0px 5px #E0E0E0;"></table>';else var f='<table id="mainStructure" width="800" class="full-width" align="center" border="0" cellspacing="0" cellpadding="0" style="background-color:'+d+'; width:800px; max-width: 800px; margin: 0 auto; outline: 1px solid #efefef; box-shadow: 0px 0px 5px #E0E0E0;"></table>';return $(".buildTemplate").append(f),$("#sortable > li >table[name]").each(function(b){structure=$(this).html(),"MailChimp"==a?(modular='<tbody><tr mc:repeatable ><td valign="top"><table class="mailChimpTag" width="100%" align="center" border="0" cellspacing="0" cellpadding="0" >'+structure+"</table></td></tr></tbody>",$(".buildTemplate > #mainStructure ").append(modular)):$(".buildTemplate > #mainStructure").append(structure)}),$(".buildTemplate > #mainStructure ").find("table").each(function(){$(this).css({"mso-table-lspace":"0pt","mso-table-rspace":"0pt"}),this.style.setProperty("mso-table-lspace","0pt"),this.style.setProperty("mso-table-rspace","0pt");var a="mso-table-lspace:0pt; mso-table-rspace:0pt;",b=$(this).is("[style]")?$(this).attr("style")+a:a;this.setAttribute("style",b)}),$(".buildTemplate > #mainStructure ").find("table").siblings().each(function(a){$(this).parent().children().length;if($(this).is("table:first-child")&&($(this).is("[align=right]")&&($(this).parent().closest("table").attr("dir","rtl"),$(this).attr("dir","ltr"),$(this).siblings().each(function(){$(this).attr("dir","ltr")})),$(this).parent().contents().filter(function(){return 8===this.nodeType}).remove().end()),!$(this).is("table:last-child")){$('\x3c!--[if (gte mso 9)|(IE)]></td><td valign="top" ><![endif]--\x3e').insertAfter($(this))}}),"MailChimp"==a&&($(".buildTemplate > #mainStructure").find("#mainTD").removeAttr("id"),$(".buildTemplate > #mainStructure").find(".mailChimpTag").removeAttr("class"),$(".buildTemplate > #mainStructure > tbody >tr").each(function(){}),$(".buildTemplate > #mainStructure").find("[style*='font-family']").each(function(a){$(this).attr("mc:edit","text-"+a)}),$(".buildTemplate > #mainStructure").find("img").each(function(a){$(this).closest("td").attr("mc:edit","image-"+a)}),$(".buildTemplate > #mainStructure").find("multiline").contents().unwrap(),$(".buildTemplate > #mainStructure").find("unsubscribe").contents().unwrap()),"CampaignMonitor"==a?($(".buildTemplate > #mainStructure").find("img").each(function(a){$(this).attr("editable",""),$(this).attr("label","image-"+a)}),$(".buildTemplate > #mainStructure").find("td[style*='font-family'] ").each(function(a){$(this).findTextMatch("view online")||$(this).findTextMatch("view on web")||$(this).findTextMatch("view on web")?$(this).wrapTag("view online","webversion"):$(this).findTextMatch("unsubscribe")||$(this).wrapInner('<multiline label="text-'+a+'"></multiline>'),$(this).findTextMatch("unsubscribe")&&$(this).wrapTag("unsubscribe","unsubscribe")})):$(".buildTemplate > #mainStructure").find("multiline").contents().unwrap(),$(".border-text-float,\t\t\t.border-element-float,\t\t\t.circle-button-add,\t\t\t.circle-button-remove,\t\t\t.button,\t\t\t.border-duplicate,\t\t\t.area-button").remove(),$(".buildTemplate > #mainStructure").find("a").each(function(){if($(this).attr("border","0"),$(this).css({"border-style":"none"}),$(this).is("[style*='text-decoration']")){var a=$(this).css("text-decoration");this.style.setProperty("text-decoration",a,"important")}else this.style.setProperty("text-decoration","none","important")}),$(".buildTemplate > #mainStructure").find("img[image-hide]").each(function(){$(this).is("[image-hide]")&&($(this).closest("td").next().is("td")||$(this).closest("td").prev().is("td")?$(this).closest("td").remove():$(this).closest("tr").next().is("tr")||$(this).closest("tr").prev().is("td")?$(this).closest("tr").remove():($(this).parent("a").remove(),$(this).remove()))}),$(".buildTemplate > #mainStructure").find("*").each(function(){$(this).removeAttr("preview-bg"),$(this).removeAttr("edit-style"),$(this).removeAttr("edit-bg"),$(this).removeAttr("full-width"),$(this).removeAttr("edit-hideable"),$(this).removeAttr("edit-button-radius-group"),$(this).removeAttr("edit-button-radius"),$(this).removeAttr("edit-duplicate"),$(this).removeAttr("panel-color"),$(this).removeAttr("editor"),$(this).removeAttr("edit-img"),$(this).removeAttr("save-edit-style"),$(this).removeAttr("save-color"),$(this).removeClass("relative_index1"),$(this).removeClass("relative_index2"),$(this).removeAttr("effect-all"),$(this).css("position",""),$(this).css("cursor",""),$(this).removeAttr("data-mce-style"),""==$(this).attr("class")&&$(this).removeAttr("class"),""==$(this).attr("style")&&$(this).removeAttr("style"),"none"==$(this).css("display")&&$(this).remove()}),$(".buildTemplate > #mainStructure").find(".hide-image").remove(),$(".buildTemplate > #mainStructure").find("[style*=background-image]").each(function(){$(this).BGOutlookHooks()}),$(".buildTemplate").find("table[align=center]").each(function(){$(this).css({margin:"0 auto"})}),$(".buildTemplate td").find("[style*=font-family]").each(function(){var a=parseInt($(this).css("font-size"));$(this).css({"line-height":a+8+"px"}),_this=this,$(_this).find("[style*=font-size]").each(function(){var a=parseInt($(this).css("font-size"));$(this).css({"line-height":a+8+"px"})})}),$(".buildTemplate td[height]:not([style*=font-family])").each(function(){0==$(this).children().length&&($(this).css({"font-size":"0","line-height":"0","border-collapse":"collapse"}),$(this).height()>18&&$(this).html("&nbsp;"))}),$(".buildTemplate td").find("span[style*=font-family]").each(function(){if($(this).is("[style*='font-family']")){var a=$(this).css("font-family");this.style.setProperty("font-family",a,"important")}}),$(".buildTemplate").find("td[style*=background-color]").each(function(){if($(this).inlineStyle("background-color")){var a=Kb($(this).css("background-color"));$(this).attr("bgcolor",a)}}),$(".buildTemplate").find("img").each(function(a){this.style.setProperty("display","block","important")}),$(".buildTemplate").find("td[style*=text-align]").each(function(){$(this).attr("align",$(this).css("text-align"))}),$(".buildTemplate").find("td[style*=font-family]").each(function(){$(this).find("*").each(function(){"ul"!=$(this)[0].localName&&"li"!=$(this)[0].localName&&(f_size=$(this).css("font-size"),f_weight=$(this).css("font-weight"),f_family=$(this).css("font-family"),$(this).css({"font-size":f_size,"font-weight":f_weight,"font-family":f_family}),"span"!=$(this)[0].localName&&"a"!=$(this)[0].localName||$(this).wrapInner(function(){return""!=this.textContent&&'<font face=""></font>'}).children("font:first").attr("face",f_family))})}),$(".buildTemplate").find("[style*=color]").each(function(){if($(this).inlineStyle("color")){var a=Kb($(this).css("color"));$(this).styleHooks("color",a);var b=$(this).attr("style");$(this).attr("style",b)}}),$(".buildTemplate").find("[style*=background-color]").each(function(){if($(this).inlineStyle("background-color")){var a=Kb($(this).css("background-color"));$(this).styleHooks("background-color",a);var b=$(this).attr("style");$(this).attr("style",b)}}),buildHTML=$(".buildTemplate").html(),$(".buildTemplate").find("img").each(function(a){ex=void 0!=$(this).attr("src")?$(this).attr("src"):"http://dummyimage.com/10x10/f0f0f0/000000.jpg",F().test(ex)||(arrImg.push(ex.filename()),newPathImg=ex.split("../../")[1],arrImgSrc.push(newPathImg),buildHTML=1==b?buildHTML.replace(ex,fullurl+newPathImg):buildHTML.replace(ex,"images/"+ex.filename()))}),$(".buildTemplate").find("[style*=background-image]").each(function(){new_inlineStyle="";var a=$(this).css("background-image");if("none"!=(a=a.match(/^url\("?(.+?)"?\)$/)[1])&&!F().test(a)){arrImg.push(a.filename());$(this).attr("style");newPathBG=a.split(removePathFromSrc)[1],arrImgSrc.push(newPathBG)}}),dataTemplate=dataTemplate.replace(/&quot;/g,"'"),buildHTML=buildHTML.deleteQuotFromBGURL(),$(".buildTemplate").remove(),$(".template").html(""),arrImg=jQuery.unique(arrImg),arrImgSrc=jQuery.unique(arrImgSrc),1==b&&(arrImgSrc=[],arrImg=[]),buildHTML}function F(){return RegExp("^((f|ht)tps?:)?//(?!"+location.host+")")}function H(a){g("wait","Please wait, Template is saving",!0),Za($(".area-template")),Lb(),em=a.target,saveHtml=$("#sortable").html();var c=pathURL.split("build").join("saveTemplate");$.ajax({url:c,type:"POST",data:{id:b,html:saveHtml},dataType:"text"}).done(function(){setTimeout(function(){g("success","Saved template successfully",!1)},1e3)})}function I(a){1==a&&$("#submenu_option").animate({left:submenu.show,width:submenu.hide},submenu.animateTime)}function J(a){$("#submenu_option .slide-box > div").each(function(){$(this).attr("id")==a?($(this).show(),$(this).css({opacity:1})):($(".select_template").hide(),$(this).hide())})}function K(a){a?(e_style.removeClass("disable"),e_style.animate({left:0},submenu.animateTime)):e_style.animate({left:-submenu.hide},submenu.animateTime,function(){e_style.addClass("disable")})}function L(){if("demo"==c){demo_Template;var a=$.parseHTML(demo_Template);$(".demo_output").append(a),$(".demo_output").find(".demo_url").each(function(){$(this).attr("href",urlDemo)}),cssStyle=$(".demo_output").find("style").text(),demo_html=$(".demo_output > table")[0].outerHTML,$(".demo_output").remove()}}function M(){$("body").append('<div class="show-all-template">\t\t\t<h2>CHOOSE A TEMPLATE AND ENJOY IT!</h2>\t\t\t<div class="item-container">\t\t\t<div class="all-item">\t\t\t</div>\t\t\t</div>\t\t\t</div>'),$.each(all_Templates,function(a,b){$(".all-item").append('<div class="shadow-thumb"><p>'+b.name.split(".")[0].replace(/([0-9]+\_)/g,"").replace(/\_/g," ")+'</p><div class="item-thumb" data-name="'+b.name+'"></div></div>');var c=b.name;$.each(all_layouts[c],function(a,b){var d=b.replace(tempPath,"");$(".item-thumb[data-name="+c+"]").append('<img src="'+d+'" style="width:100% !important; float:left;">')})}),$(".item-thumb").bind({click:N})}function N(){var a=$(this).attr("data-name"),b=a.split(".")[0].replace(/([0-9]+\_)/g,"").replace(/\_/g," ");$(".template_list").find(".template_name").text(b),firstLoadDemo=!0,$(".show-all-template").remove(),1!=templateHTML[a].active&&($("#sortable").html(""),Q(all_Templates[a]))}function Q(a){var b=a.html.setImageURL();$(".template").append(b),W(a)}function R(){window.elm=".template #mainStructure",$(window.elm).find("[edit-style=outsite_box]").each(function(){$(this).attr("edit-style","outside_box")});var a=$(".template #mainStructure").find("tbody[name]");S(a,">tr","preview-bg",""),S(a,">tr>td","edit-style","outside_box"),S(a,">tr>td>table:first","edit-style","inside_box"),S(a,"[edit-style=outside_box]:first","edit-bg","Outside"),S(a,"[edit-style=inside_box]:first","edit-bg","Inside"),T(),U(),$(elm).find("[style*='font-family']").each(function(){if(!$(this).inlineStyle("background-color")){var a=$(this).closest("[edit-style]").attr("edit-style");$(this).attr("panel-color",a)}}),$(elm).find("[style*='background-color']").each(function(){$(this).inlineStyle("background-color")&&($(this).is("[effect-all='true']")||$(this).attr("effect-all","false"))})}function S(a,b,c,d){a.each(function(){$(this).checkHasAttr(b,c,d)})}function T(){$(".template #mainStructure").find("tbody[name]").each(function(){if(_outside=$(this).find("[edit-bg=Outside]"),_inside=$(this).find("[edit-bg=Inside]"),_outside.attr("full-width","false"),_outside.inlineStyle("background-image")&&_outside.attr("full-width","true"),!_outside.inlineStyle("background-color")){var a=_outside.closest("#mainStructure").css("background-color");a?_outside.css({"background-color":a}):_outside.css({"background-color":"#333333"})}if(_inside.inlineStyle("background-image")){if(_outside.attr("full-width","false"),!_inside.inlineStyle("background-color")){var b=_inside.closest("[edit-bg=Outside]").inlineStyle("background-color");b?_inside.css({"background-color":b}):(b=_inside.closest("#mainStructure").css("background-color"),b?_inside.css({"background-color":b}):_inside.css({"background-color":"#333333"}))}}else if(!_inside.inlineStyle("background-color"))if(_inside.closest("[edit-bg=Outside]").inlineStyle("background-image")){_inside.attr("save-edit-style","inside_box"),_inside.removeAttr("edit-style");var b=_inside.closest("[edit-bg=Outside]").inlineStyle("background-color");b?_inside.attr("save-color",b):(b=_inside.closest("#mainStructure").css("background-color"),b?_inside.attr("save-color",b):_inside.attr("save-color","#333333"))}else b=_inside.closest("[edit-bg=Outside]").inlineStyle("background-color"),b?_inside.css({"background-color":b}):(b=_inside.closest("#mainStructure").css("background-color"),b?_inside.css({"background-color":b}):_inside.css({"background-color":"#333333"}))})}function U(){num=0,$(".template #mainStructure tbody[name]").find("*").each(function(){$(this).inlineStyle("background-color")&&!$(this).is("[edit-style]")&&$(this).attr("edit-style","bg_color_"+num++)})}function V(a){$(a).find("img").each(function(){var a=$(this).attr("src").filename();$(this).attr("src","../../"+imagePath+"/"+a)}),$(a).find("[edit-bg] , [style*=background-image]").each(function(){if($(this).inlineStyle("background-image")){var a=$(this),b="";$.each(a.prop("style"),function(c,d){b+=d+":"+a.prop("style")[d]+";"}),$(this).attr("style",b);var d=$(this).css("background-image"),e=d.match(/^url\("?(.+?)"?\)$/)[1];if("demo"==c){var f=e.replace("/images/","/images_demo/");$(this).css("background-image","url("+f+")")}else $(this).css("background-image","url("+e+")")}})}function W(a){if(Object.keys(all_Templates).length-1!=tempTotal){R(a.name);if($(".template").find("style").append("td ul{list-style: initial; margin:0; padding-left:20px;}"),V(".template"),jQuery.isEmptyObject(templateHTML)){var c="",d={h_meta:[],h_title:[],h_link:[]};$(".template meta").each(function(){d.h_meta.push($(this).context.outerHTML)}),$(".template > title").each(function(a){d.h_title.push($(this).context.outerHTML)}),$(".template > link").each(function(a){d.h_link.push($(this).context.outerHTML)});$(".template").find("style").append("\n\r\t@media only screen and (max-width: 640px){ .image-100-percent{ width:100%!important; height: auto !important; max-width: 100% !important; min-width: 124px !important;}}"),$(".template > style").each(function(a){c=$(this).context.outerHTML.replace(/\-webkit\-font\-smoothing: antialiased;/g,"")});var f=$.merge($.merge(d.h_meta,d.h_title),d.h_link);$.each(all_Templates,function(a,b){item={},item.inHead=f,item.cssStyle=c,item.html=$(".template").html(),item.names=b.name.split(".")[0].replace(/([0-9]+\_)/g,"").replace(/\_/g," "),item.active=!1,templateHTML[b.name]=item,Y(item.names)}),templateHTML[a.name].active=!0;a.name;$(".template_list").find(".template_name").text(a.name)}all_Templates[a.name].html=$(".template").html(),templateHTML[a.name].html=$(".template").html(),tempTotal++}la(a.name)}function X(a){selects={},"active"==a?($(".template").html(""),$.each(templateHTML,function(a,b){if(b.active){selects.inHead=b.inHead,selects.cssStyle=b.cssStyle,selects.names=b.names,selects.active=b.active,selects.html=b.html,OldSelect=String(b.names).replace(/\s/g,"_"),$(".template").children().length||$(".template").html(b.html),$(".template td").find("[style*='font-family']").each(function(){$(this).css({"word-break":"break-word"})}),$(".template").find("td[class=fix-box]").each(function(){$(this).removeClass("fix-box")}),$(".template td[height]:not([style*=font-family])").each(function(){0==$(this).children().length&&$(this).css({"font-size":"0","line-height":"0","border-collapse":"collapse"})}),$(".template span , .template a").each(function(){$(this).is("[style*='font-size']")||$(this).css({"font-size":"inherit"})}),$(".template [width] ").each(function(){if(!RegExp(/(\%|auto)/g).test($(this).attr("width")))if("img"==$(this)[0].localName){var b=$(this).closest("td");b.attr("width",$(this).attr("width")),b.css({width:$(this).attr("width")})}else $(this).css({width:$(this).attr("width")})}),$(".template > table").children().each(function(a){selects[$(this).attr("name")]=$(this).html()}),$(".area-template td").find("[style*=font-family]").each(function(){$(this).css({"word-break":"break-word"});var a=parseInt($(this).css("font-size"));$(this).css({"line-height":a+8+"px"}),_this=this,$(_this).find("[style*=font-size]").each(function(){var a=parseInt($(this).css("font-size"));$(this).css({"line-height":a+8+"px"})})}),$(".area-template").find("[edit-style=outsite_box]").each(function(){$(this).attr("edit-style","outside_box")}),$(window.elm).find("[edit-style=outsite_box]").each(function(){$(this).attr("edit-style","outside_box")});$(".area-template li[selector]").find("table[name]");$(".area-template li[selector]").find("td[class=fix-box]").each(function(){$(this).removeClass("fix-box")}),$(".area-template td[height]:not([style*=font-family])").each(function(){0==$(this).children().length&&$(this).css({"font-size":"0","line-height":"0","border-collapse":"collapse"})}),$(".area-template  span , .area-template  a").each(function(){$(this).is("[style*='font-size']")||$(this).css({"font-size":"inherit"})}),$(".area-template").find("li.draggable").each(function(){$(this).css({"z-index":"auto"})}),$(".area-template").find("table").each(function(){$(this).is("[width]")||(560==$(this).width()||600==$(this).width()?$(this).attr("width","100%"):$(this).attr("width","auto"))}),$(".area-template [width] ").each(function(){if(!RegExp(/(\%|auto)/g).test($(this).attr("width")))if("img"==$(this)[0].localName){var b=$(this).closest("td");b.attr("width",$(this).attr("width")),b.css({width:$(this).attr("width")})}else $(this).css({width:$(this).attr("width")})}),$.each(b.inHead,function(a,b){$(".con-style").html(b)}),$(".con-style").append(b.cssStyle);var d=$(".con-style").find("style").text().replace(/[\n\r]+/g,"").replace(/\/\*[^\/\*]+\*\//g,"");$(".con-style").find("style").text(d),bb(),$(".template").html("")}})):(""!=OldSelect&&(OldSelect=String(OldSelect).replace(/\s/g,"_"),templateHTML[OldSelect].active=!1),$.each(templateHTML,function(b,c){c.names==a&&(c.active=!0,OldSelect=String(c.names).replace(/\s/g,"_"),X("active"))}))}function Y(a){$(".select_template .list-box").append('<li><span style="float:left;">'+a+'</span><i class="preview-template"></i><i class="select-template"></i></li>')}function Z(){$(".template_list").unbind(),$(".template_list").bind({mouseenter:ia,mouseleave:ja,click:ha}),$(".select-template").bind({click:ga}),$(".preview-template").bind({mouseenter:ba,mouseleave:ea,click:fa})}function aa(){var b=240;if(ca("#submenu_option > #screenshot","remove"),$("#submenu_option > #screenshot > #squaresWaveG").remove(),$("#submenu_option #screenshot").css({height:"auto",width:b,position:"absolute",top:0,right:-(b+10),"background-color":"#333333"}),$("#submenu_option #screenshot").height()>$("#submenu_option").height()){da("#submenu_option #screenshot",-($("#submenu_option #screenshot").height()-$("#submenu_option").height())-75,0,6e3)}}function ba(a){a.preventDefault(),$("#submenu_option > #screenshot").length||$("#submenu_option").append('<div id="screenshot" style="position:absolute; top:0; right:-250px; display:block; float:left; height:100%; width:240px; background-color:#333333;"></div>'),$("#submenu_option #screenshot").clearQueue(),$("#submenu_option #screenshot").stop(!0),$("#submenu_option #screenshot").html(""),ca("#submenu_option > #screenshot");var b=$(this).parent().text().replace(/\s/g,"_");$.each(all_layouts[b],function(a,c){var d=all_layouts[b].length,e=c.replace(tempPath,""),f='<img src="'+e+'" style="width:100% !important; float:left;">';imgLoaded.push('<img src="'+e+'" style="display:block; width:260px;">'),$("#submenu_option #screenshot").append(f),imgLoaded[a]='<img src="'+e+'" style="display:block; width:260px;">',$(f).one("load",function(a){imgLoaded.length==d&&(preImage[b]={images:imgLoaded,names:b},imgLoaded=[],aa())}).one("error",function(){}).attr("src",e)})}function ca(a,b){var b=b||!1,c=a+" > #squaresWaveG";if(b)$(c).remove();else if(!$(c).length){var d='<div id="squaresWaveG">\t\t\t\t<div id="squaresWaveG_1" class="squaresWaveG"></div>\t\t\t\t<div id="squaresWaveG_2" class="squaresWaveG"></div>\t\t\t\t<div id="squaresWaveG_3" class="squaresWaveG"></div>\t\t\t\t<div id="squaresWaveG_4" class="squaresWaveG"></div>\t\t\t\t<div id="squaresWaveG_5" class="squaresWaveG"></div>\t\t\t\t<div id="squaresWaveG_6" class="squaresWaveG"></div>\t\t\t\t<div id="squaresWaveG_7" class="squaresWaveG"></div>\t\t\t\t<div id="squaresWaveG_8" class="squaresWaveG"></div>\t\t\t\t</div>';$(a).append(d);var e=$(a).height()/2-$(c).height()/2,f=$(a).width()/2-$(c).width()/2;$(c).css({position:"absolute",top:e,left:f})}}function da(a,b,c,d){$(a).delay(500).animate({top:b},d).delay(1e3).animate({top:c},d,function(){da(a,b,c,d)})}function ea(a){a.preventDefault(),$("#submenu_option #screenshot").clearQueue(),$("#submenu_option #screenshot").stop(!0),$("#submenu_option #screenshot").html(""),$("#submenu_option #screenshot").remove(),imgLoaded=[]}function fa(a){a.preventDefault();var b=$(a.target).parent().text();$.each(templateHTML,function(a,c){if(c.names==b){var d=$(c.html).filter("table:first"),e=$(d).css("background-color"),f=parseInt($(d).find("tbody[name]").length);$(d).find("tbody[name]").each(function(a){$(".template").append('<table width="800" border="0" cellspacing="0" cellpadding="0" style="background-color:'+e+'; ">'+$(this).html()+"</table>"),a==f-1&&(Object.keys(all_Templates).length-1!=tempTotal&&V(".template"),t($(".template").html()),$(".template").html(""))})}})}function ga(){$(".template_list").find(".template_name").text($(this).parent().text());var a=$(this).parent().text().replace(/\s/g,"_");Q(all_Templates[a])}function ha(a){if("LI"==a.target.tagName){$(this).find(".template_name").text($(a.target).text());var b=$(this).find(".template_name").text().replace(/\s/g,"_");Q(all_Templates[b])}}function ia(){$(this).find("ul").addClass("show_temp_list")}function ja(){$(this).find("ul").removeClass("show_temp_list")}function la(a){if(void 0==preImage[a])ma(a);else{var b=Object.keys(preImage[a].images).length,c=all_layouts[a].length;void 0!==preImage[a].names&&b==c?pa(a):ma(a)}}function ma(a){imgLoaded=[],$("#repeatable").html(""),ca(".slide-box"),$.each(all_layouts[a],function(b,c){var d=all_layouts[a].length,e=c.replace(tempPath,""),f='<img src="'+e+'" style="display:block; width:260px;">';$("#repeatable").append('<li class="draggable" style="margin-bottom:10px;">'+f+"</li>"),imgLoaded[b]=f,$(f).one("load",function(b){imgLoaded.length==d&&(preImage[a]={images:imgLoaded,names:a},imgLoaded=[],oa(a))}).one("error",function(){}).attr("src",e)})}function oa(a){ca(".slide-box","remove"),X(a.replace(/\_/g," ")),va(),firstLoad||(firstLoad=!0,sa(),"demo"==c&&Object.keys(all_Templates).length>4&&M()),firstLoadDemo&&(firstLoadDemo=!1,sa())}function pa(a){$("#repeatable").html(""),$.each(preImage[a].images,function(a,b){$("#repeatable").append('<li class="draggable" style="margin-bottom:10px;">'+b+"</li>")}),X(a.replace(/\_/g," ")),va()}function qa(){t_center=($(window).width()-$(".sidemenu").width())/2-$(".area-template").width()/2,$(".area-template").css({"padding-left":$(".sidemenu").width()})}function sa(){$(".item > ul").css({height:windowHeight}),$("#layout").animate({opacity:1},2e3,function(){}),""!=dataTemplate&&"demo"!=c&&(dataTemplate=dataTemplate.replace(/&quot;/g,"'"),$("#sortable").append(dataTemplate)),$(".item > ul").css({position:"relative","overflow-y":"visible"}),$(".item").css({position:"relative",display:"inline-block",width:"auto",height:"auto","overflow-y":"visible"}),wa(),""==dataTemplate&&"demo"==c&&$("#layout > #repeatable").find(".draggable").each(function(){Fa($(this)),$(".item > ul").css({height:"100%","overflow-y":"visible"})}),$(".area-template").find(".hide-image").remove(),$(".area-template").find("[image-hide]").each(function(){$(this).parent().append('<div class="hide-image" disabled="true"></div>'),m_t=-$(this).parent().find(".hide-image").height()/2,m_l=-$(this).parent().find(".hide-image").width()/2,$(this).parent().find(".hide-image").css({"margin-top":m_t,"margin-left":m_l})}),_a(),xa(),Z(),ua(),$.each(all_Templates,function(a,b){templateHTML[a].html=b.html}),$(".area-template").find("img[data-mce-src]").each(function(){$(this).removeAttr("data-mce-src")}),$(".area-template").find("[style*=background-image],[style*=background]").each(function(){if($(this).inlineStyle("background-image")){var a=$(this),b="";$.each(a.prop("style"),function(c,d){b+=d+":"+a.prop("style")[d]+";"}),$(this).attr("style",b);var c=$(this).css("background-image");if("none"==c)ta(this);else{/\.(gif|jpg|jpeg|tiff|png)$/i.test(c.match(/^url\("?(.+?)"?\)$/)[1])||ta(this)}}}),$(".area-template td").find("[style*=font-family]").each(function(){$(this).css({"word-break":"break-word"});var a=parseInt($(this).css("font-size"));$(this).css({"line-height":a+8+"px"}),_this=this,$(_this).find("[style*=font-size]").each(function(){var a=parseInt($(this).css("font-size"));$(this).css({"line-height":a+8+"px"})})}),$(".area-template").find("img[vspace]").each(function(){parseInt($(this).attr("vspace"))>0&&($(this).closest("td").css({"padding-top":parseInt($(this).attr("vspace"))}),parseInt($(this).attr("vspace","0")))}),bb(),$(".template").html(""),$(".area-template").find("a").each(function(){var a=$(this).attr("href"),b=new RegExp(/(http|https)+(:\/)+[a-zA-Z0-1]/,"gi");if(b.test(a)){var c=a.match(b)[0],d=c.slice(0,-1),e=$(this).attr("href").replace(d,d+"/");$(this).attr("href",e),$(this).attr("data-mce-href",e)}}),version}function ta(a){$(a).is("[full-width]")&&$(a).attr("full-width",!1),$(a).css({"background-image":"","background-repeat":"","background-position":"","background-size":""}),$(a).removeAttr("background"),$(a).closest("[selector=select]").find("[edit-bg]").each(function(){var a=$(this).is("[edit-style]")?$(this).attr("edit-style"):$(this).attr("save-edit-style");"none"==$(this).css("background-image")&&$(this).css({"background-image":"","background-repeat":"","background-position":"","background-size":""}),$(this).is("[save-color]")&&($(this).css({"background-color":$(this).attr("save-color")}),$(this).attr("edit-style",$(this).attr("save-edit-style")),$(this).removeAttr("save-color"),$(this).removeAttr("save-edit-style")),$(this).find("[edit-style="+a+"],[save-edit-style="+a+"]").each(function(){$(this).is("[save-color]")&&($(this).css({"background-color":$(this).attr("save-color")}),$(this).attr("edit-style",$(this).attr("save-edit-style")),$(this).removeAttr("save-color"),$(this).removeAttr("save-edit-style"))})})}function ua(){$("#loader-wrapper").addClass("load_hide");setTimeout(function(){$("#loader-wrapper").remove()},300)}function va(){$(".draggable").css({cursor:"move"}),$("#layout .draggable").each(function(){Ba(this),$(this).draggable({connectToSortable:"#sortable",helper:"clone",revert:"invalid",drag:function(a,b){za(b.helper),Aa(b.helper,.85,0)},stop:function(a,b){}}),$(this).click(function(){Fa($(this)),$(".item > ul").css({height:"100%","overflow-y":"visible"})})})}function wa(){$("#sortable").sortable({cursor:"move",connectWith:".connectedSortable",placeholder:"ui-state-highlight",refreshPositions:!1,revert:!1,over:function(a,b){},sort:function(a,b){Za($(".area-template"))},start:function(a,b){scrollPosi=$(".container_tempate").scrollTop(),$(".container_tempate").scrollTop(scrollPosi),Ca(b.helper),Aa(b.item,.85,1)},stop:function(a,b){b.item.css({position:"relative"}),za(b.item),Aa(b.item,1,0),$(".item > ul").css({height:"100%","overflow-y":"visible"}),scrollPosi=$(".container_tempate").scrollTop(),$(".container_tempate").scrollTop(scrollPosi),Da(b),b.item.find("img").css({width:""})}})}function xa(){$("#sortable > li").each(function(){$(this).find(".button").is(".button")||$(this).css({height:"",border:"0px dashed #dfb718"})}),ya(),Ia(),3!=version&&Ga(),$(".area-template").find("table").each(function(){$(this).is("[width]")||(560==$(this).width()||600==$(this).width()?$(this).attr("width","100%"):$(this).attr("width","auto"))})}function ya(){area_h=$(".area-template").height()<$(".container_tempate").height()?$(".container_tempate").height():$(".area-template").height(),$(".area").css({height:$(".area-template").height()})}function za(a){a.css({"z-index":"auto"}),a.find("img").css({display:"block"})}function Aa(a,b,c){a.css({opacity:b,border:c+"px dashed #333333"})}function Ba(a){$(a).css({outline:0}),$(a).hover(function(){offposi=$(a).parent().offset().top,$(a).css({width:"auto",outline:"1px dashed #dfb718","pointer-events":"auto","z-index":1})},function(){$(a).css({outline:"0px dashed #dfb718","pointer-events":"auto","z-index":0})})}function Ca(a){stageHighlight=a.find("img").height(),$(".ui-state-highlight").css({display:"block",width:areaWidth,height:20,background:"#555555"})}function Da(a){if("select"!=a.item.attr("selector")){$(".container_main").find(".template").is(".template")||$(".container_main").append('<div class="template"></div>');var b=a.item.find("img").attr("src").filename().split(".")[0],c=b;a.item.find("img").remove(),color_Temp2="#ececec";var d=selects[c];a.item.append('<table width="'+areaWidth+'" name="'+c+'" border="0" cellspacing="0" cellpadding="0" style="background-color:'+color_Temp2+'; "></table>'),a.item.find("table").append(d),a.item.attr("selector","select"),a.item.find("[style*='font-family']").each(function(){$(this).attr("editor","content")}),xa(),a.item.mousedown(function(){$(this).find("[contenteditable]").removeAttr("contenteditable")}),a.item.css({margin:0}),a.item.css({opacity:0}),a.item.animate({opacity:1},500),$(this).css({border:0})}}function Fa(a){$(".container_main").find(".template").is(".template")||$(".container_main").append('<div class="template"></div>');var b=$(a).find("img").attr("src").filename().split(".")[0],c=b,d=selects[c];color_Temp2="#ececec",_li='<li class="draggable ui-draggable" active="active" style="cursor: move; display: list-item; position: relative; margin: 0px;"></li>',$("#sortable").append(_li),$("#sortable > li[active]").each(function(a){$(this).append('<table width="'+areaWidth+'" name="'+c+'" border="0" cellspacing="0" cellpadding="0" style="background-color:'+color_Temp2+'; "></table>'),$(this).find("table").append(d),$(this).attr("selector","select"),$(this).find("[style*='font-family']").each(function(){$(this).attr("editor","content")}),$(this).removeAttr("active"),xa(),$(this).mousedown(function(){$(this).find("[contenteditable]").removeAttr("contenteditable")}),$(this).css({margin:0}),$(this).css({opacity:0}),$(this).animate({opacity:1},500),$(this).css({border:0})})}function Ga(){$("#sortable").find("[edit-duplicate]").each(function(a){$(this).addClass("relative_index1"),$(this).is("[dup]")||$(this).attr("dup","0"),$(this).closest("[selector]").find(),$(this).bind({mouseover:Oa,mouseout:Pa})}),$("#sortable").find("[editor=content]").each(function(){$(this).addClass("relative_index2"),$(this).unbind(),$(this).bind({mouseenter:La,mouseleave:Ma,click:Ja})}),$(".area-template").css({"pointer-events":"none"}),$(".sidemenu , .area-template").unbind(),$(".area-template .item").css({"pointer-events":"auto"})}function Ia(){$("#sortable").find("[edit-duplicate]").unbind(),$("#sortable").find("[editor=content]").unbind()}function Ka(a,b){1==b?($(a).children().length?(offset_top=0,offset_left=$(a).children().position().left,td_w=$(a).children()[0].offsetWidth?$(a).children()[0].offsetWidth:$(a).children().context.offsetWidth,td_h=$(a).height()):(offset_top=0,offset_left=0,td_w=$(a).width(),td_h=$(a).height()),$(a).closest("[edit-duplicate]").is("[edit-duplicate]")&&$(a).children().is("span,a")&&$(a).children(":first").height()>$(a).height()&&$(a).attr("block_txt",""),$(a).find(".border-text-float").is(".border-text-float")||$(a).append('<div class="border-text-float"></div>'),$(a).find(".border-text-float").css({top:offset_top,left:offset_left,width:td_w,height:td_h})):$(a).find(".border-text-float").remove()}function Na(a,b){if(1==b){if($(a).find(".relative_index2").each(function(){$(this).children().is("span,a")&&$(this).children(":first").height()>$(this).height()&&$(this).attr("block_txt","")}),pad=0,!$(a).is(".area-box")){Na($(".area-template"),!1),$(a).addClass("area-box"),pad=0;var c=$(a).closest("[selector=select]");c.find(".area-button").is(".area-button")||(c.append('<div class="area-button"><div class="circle-button-add">+</div>\t\t           \t\t\t\t\t<div class="circle-button-remove" title="Remove">-</div></div>'),em_posi=void 0!=$(a).position()?$(a).position():0,em_h=void 0!=$(a).outerHeight()?$(a).outerHeight():"100%",c.find(".area-button").css({top:em_posi.top,left:em_posi.left-($(".area-button").width()+pad+parseInt($(".area-button").css("padding-right"))),height:em_h}),$(".circle-button-add , .circle-button-remove").unbind(),$(".circle-button-add , .circle-button-remove").bind({mouseenter:Sa,mouseleave:Ta,click:Qa}))}return parseInt(pad)}$(".area-template").find("[block_txt]").each(function(){$(this).removeAttr("block_txt")}),$(".area-template").find(".border-duplicate").remove(),$(".area-template").find(".area-button").remove(),$(".area-template").find(".area-box").removeClass("area-box")}function Ra(a,b){var c=b,d=/[a-zA-Z0-1_]*[a-zA-Z]/.exec(c);$(a).find("[edit-style*="+d[0]+"]").each(function(a){if($(this).is("[edit-bg]"))return!1;0!=a?$(this).attr("edit-style",d[0]+"_"+a):$(this).attr("edit-style",d[0])})}function Va(a,b){if($(a).css({cursor:"text"}),$(a).inlineStyle("background-color"))window._bgcolor=$(a).css("background-color");else{var c=$(a).attr("panel-color");window._bgcolor=$(a).closest("[edit-style~='"+c+"']").css("background-color")}if(window.obj=a,$(a).find("img").is("img")){var d=$(a).find("img").attr("src");$(a).find("img").attr("data-mce-src",d)}$(a).find(".mce-item-table").removeClass("mce-item-table"),cb()}function Wa(a,b){1==b?($(a).find(".border-element-float").is(".border-element-float")||$(a).append('<div class="border-element-float"></div>'),$(a).find(".border-element-float").css({width:$(a).width(),height:$(a).height(),"pointer-events":"none"})):$(a).find(".border-element-float").remove()}function Xa(b){Lb(),$(b).children(".button").length||(Wa($(b),!0),$("#sortable").find(".button").remove(),$(b).find(".button").is(".button")||($(b).append('<div class="button remove-btn" >Remove</div>'),$(b).append('<div class="button duplicate" >Duplicate</div>'),$(b).find("[edit-style]").is("[edit-style]")&&$(b).append('<div class="button style" >Edit Style</div>'),$(b).find("[edit-bg]").is("[edit-bg]")&&$(b).append('<div class="button backgroundImage" >Background Image</div>'),$(b).find(".button").each(function(b){arrW[b]=$(this).width(),p=parseInt($(this).css("padding-left"))+parseInt($(this).css("padding-right")),$(this).css({top:-($(".button").height()+parseInt($(this).css("padding-top"))+parseInt($(this).css("padding-bottom")))}),b>0&&(a=b-1,$(this).css({left:arrW[a]+arrX[a]+p,cursor:"pointer"})),arrX[b]=$(this).position().left}),$(b).find(".remove-btn").click(function(){$(this).hasClass("remove-btn")&&($(this).parent().remove(),_a())}),$(b).find(".duplicate").click(function(){K(!1),v($("#menu_container .menu[title='Choose Module']"),"Choose Module"),$a($(this).parent())}),$(b).find(".style").click(function(a){$(this).hasClass("style")&&(window.activeLayout=$(this).parent(),colorArr=[],$(window.activeLayout).find("[edit-style]").each(function(a){if(qb($(this).attr("edit-style")))colorArr.push($(this).attr("edit-style"));else{var b=$(this).attr("edit-style"),c=b.split(" "),d=String(c).split("-",1),e=String(d).split(",");$.each(e,function(a,b){"border"!=b&&colorArr[colorArr.length-1]!=b&&colorArr.push(b)})}}),colorArr=jQuery.unique(colorArr),K(!0),v($("#menu_container .menu[title='Edit Styles']"),"Edit Styles"))}),$(b).find(".backgroundImage").click(function(){K(!1),v($("#menu_container .menu[title='Choose Module']"),"Choose Module"),Ib($(this).parent())})),buttonCreated=!0)}function Ya(){arrW=[],arrX=[],seletorHover=0,$(document).on("mouseover","[selector=select]",function(a){0==seletorHover&&$(this).is("[selector=select]")&&(obj_duplicate=$(a.target).closest("[edit-duplicate]"),$(obj_duplicate).is("[edit-duplicate]")||$(a.target).is(".area-button")||(pad=Na(obj_duplicate,!1)))}),$(document).on("mouseenter","[selector=select]",function(a){0==seletorHover&&$(this).is("[selector=select]")&&Xa($(this))}),$(document).on("mouseleave","[selector=select]",function(a){if(0==seletorHover){$(a.target).closest("[edit-duplicate]").is("[edit-duplicate]")||Za($(".area-template")),seletorHover=0}})}function Za(a){$(a).find(".button").remove(),arrW=[],arrX=[],$(a).css({border:"0px dashed #dfb718"}),Wa(a,!1),buttonCreated=!1}function $a(a){a.clone().insertAfter(a).find(".button , .border-element-float").remove();xa()}function _a(){v($("#menu_container .menu[title='Choose Module']"),"Choose Module"),K(!1),0==$("#sortable").children().length?$("#sortable").css({height:windowHeight,"background-color":"#555555"}):$("#sortable").css({height:"100%"}),ya()}function ab(){_webfonts=["http://fonts.googleapis.com/css?family=Roboto:400,300,700","http://fonts.googleapis.com/css?family=Cardo:400,700","http://fonts.googleapis.com/css?family=Lato:300,400,700","http://fonts.googleapis.com/css?family=PT+Sans:400,700","http://fonts.googleapis.com/css?family=Muli:300,400","http://fonts.googleapis.com/css?family=Playfair+Display:400,700","http://fonts.googleapis.com/css?family=Montserrat:400,700","http://fonts.googleapis.com/css?family=Open+Sans:400,700,300"],_content_css=["../../buildassets/css/style.css"],$.each(_webfonts,function(a,b){_content_css.push(b)})}function bb(){$(".area-template ").find("*[style*=font-family]").each(function(){anyFonts=String($(this).css("font-family").replace(/(Arial|Arail|georgia|Helvetica|Tahoma|sans-serif|geneva|courier new|trebuchet ms)/g,"").replace(/(['"])|""/g,"")).split(",")[0],""!=anyFonts&&array_fonts.push(anyFonts)}),array_fonts=jQuery.unique(array_fonts),linkFonts="",$.each(array_fonts,function(a,b){_webfonts.matchWebfont(b)})}function cb(){$(".editText").css({display:"block",width:600,height:350}),window.showEditor||(window.showEditor=!0,$(".editText").html('<textarea id="input" style="background-color:#ffffff;"></textarea>')),$(".editText textarea#input")[0].value=$(window.obj).html(),tinymce.init({width:600,height:350,valid_elements:"*[*]",invalid_elements:"b,i,b/strong,i/em",inline_styles:!0,end_container_on_empty_block:!0,force_hex_style_colors:!0,allow_script_urls:!0,convert_urls:!1,formats:{bold:{inline:"span",styles:{fontWeight:"bold"}},italic:{inline:"span",styles:{fontStyle:"italic"}}},valid_styles:{"*":"font-family,line-height,color,font-size,font-weight,text-decoration,font-style,text-align,display,float,vertical-align,max-width,margin,margin-top,margin-right,margin-bottom,margin-left,padding,padding-left,padding-right,padding-top,padding-bottom,table-layout"},selector:"textarea",theme:"modern",menubar:!1,forced_root_block:"",force_br_newlines:!0,force_p_newlines:!1,content_css:_content_css,fontsize_formats:"10px 11px 12px 13px 14px 15px 16px 17px 18px 19px 20px 21px 22px 24px 26px 28px 30px 32px 34px 36px 38px 40px 42px 44px 46px 48px 50px 52px 54px 56px 58px 60px 62px 64px 66px 68px 70px 72px",font_formats:"Arial=arial,helvetica,sans-serif;Tahoma=tahoma,arial,helvetica,sans-serif;Courier New=courier new,courier,arial,sans-serif;Georgia=georgia,arial,sans-serif;Helvetica=helvetica,arial sans-serif;Trebuchet MS=trebuchet ms,geneva,arial;Roboto=Roboto,arial,sans-serif;Open Sans=Open Sans,arial,sans-serif;Cardo=Cardo,arial,sans-serif;Lato=Lato,arial,sans-serif;PT Sans=PT Sans,arial,sans-serif;Muli=Muli,arial,sans-serif;Playfair Display=Playfair Display,arial,sans-serif;Montserrat=Montserrat,arial,sans-serif;",plugins:["advlist autolink lists link image charmap print preview hr anchor pagebreak","searchreplace wordcount visualblocks visualchars code fullscreen","insertdatetime media nonbreaking save table contextmenu directionality","emoticons template paste textcolor colorpicker textpattern code"],toolbar1:"save | cancel | fontselect fontsizeselect | undo redo",toolbar2:" bold italic  link | forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist | removeformat | preview code ",image_advtab:!0,theme_advanced_buttons3_add:"save,cancel",save_enablewhendirty:!1,contextmenu:"link inserttable | cell row column deletetable",save_onsavecallback:function(){gb()},save_oncancelcallback:function(){hb()},init_instance_callback:function(a){db(),eb()},templates:[{title:"Test template 1",content:"Test 1"},{title:"Test template 2",content:"Test 2"}]}),setEC=!0,fb(),ib(!0)}function db(){var a=$(".editText #input_ifr").contents(),b=a.find("[data-mce-src]").attr("src");a.find("img").attr("data-mce-src",b),$(".area-template td").find(".mce-item-table").removeClass("mce-item-table"),$(".editText #input_ifr").contents().find("body").css({"overflow-y":"auto",height:320}),$(window.obj).inlineStyle("background-color")?$(".editText #input_ifr").contents().find("#tinymce").css({"background-color":$(window.obj).css("background-color"),color:$(window.obj).css("color"),"font-size":$(window.obj).css("font-size"),"font-family":$(window.obj).css("font-family"),"text-align":$(window.obj).css("text-align")}):$(".editText #input_ifr").contents().find("#tinymce").css({"background-color":window._bgcolor,color:$(window.obj).css("color"),"font-size":$(window.obj).css("font-size"),"font-family":$(window.obj).css("font-family"),"text-align":$(window.obj).css("text-align")})}function eb(){$(".editText").contents().find("button:contains(Save)").addClass("save"),$(".editText").contents().find("button:contains(Cancel)").addClass("cancel")}function fb(){$(".editText").css({left:$(".sidemenu").width()/2,top:$(window).height()/2-$(".editText").height()/2-100,margin:"0 auto",position:"relative"}),Za($(".area-template"))}function gb(){contentInEditor=$(".editText iframe").contents().find("#tinymce").html();var a=contentInEditor,b=a.split("<p>");String(b[1]).split("</p>");$(window.obj).html(contentInEditor),$(window.obj).find("span").is("span")||$(wc).wrapInner(function(){return""!=this.textContent&&"<span></span>"});var d=$(window.obj).find("div");$(window.obj).css({"text-align":d.css("text-align")}),$("br[data-mce-bogus]").remove(),hb(),$("#sortable").sortable({disabled:!1,cursor:"move"});var e=parseInt($(window.obj).css("font-size"));$(window.obj).css({"line-height":e+8+"px"}),$(window.ogj).find("[style*=font-size]").each(function(){var a=parseInt($(this).css("font-size"));$(this).is("[style*=line-height]")||$(window.obj).css({"line-height":a+8+"px"})}),$(".area-template td").find(".mce-item-table").removeClass("mce-item-table"),bb()}function hb(){setEC=!1,$(".editText").css({display:"none"}),$(".editText").html('<textarea id="input" style="background-color:#ffffff;"></textarea>'),ib(!1),$("#sortable").sortable({disabled:!1,cursor:"move"}),$(".area-template td").find(".mce-item-table").each(function(){$(this).removeClass("mce-item-table")}),$(".area-template").find("img[data-mce-src]").each(function(){$(this).removeAttr("data-mce-src")})}function ib(a){1==a?($(".full-page").css({display:"block",cursor:"not-allowed"}),$(".area-template").addClass("bgblur")):($(".full-page").css({display:"none",cursor:"auto"}),$(".area-template").removeClass("bgblur")),Za($(".area-template"))}function lb(a){$("#edit-style > #container-color").find(".colorTemp").remove(),$.each(a,function(a,b){var c=String(b).replace(/_/g," ");$("#edit-style > #container-color").append('<div class="colorTemp colorPicker'+a+'">    \t\t\t\t\t\t\t\t\t<div class="link-color unlink" title="Link Color"></div>    \t\t\t\t\t\t\t\t\t<div class="effect-all" title="Effect All Module">All</div>\t\t\t\t\t\t\t           <div class="form-item" >\t\t\t\t\t\t\t              <label for="color" >'+c+'</label>\t\t\t\t\t\t\t              <input type="text" id="color" name="color" value="#123456" title="Change Color" />\t\t\t\t\t\t\t            </div>\t\t\t\t\t\t\t            <div class="panel-option" style="width:300px;">\t\t\t\t\t\t\t\t           \t<form action="" style="width: 300px;">\t\t\t\t\t\t\t\t              <div id="picker"></div>\t\t\t\t\t\t\t\t            </form>\t\t\t\t\t\t\t            </div>\t\t\t\t\t\t\t        </div>'),rb(".colorPicker"+a),$("#slider"+a).slider();var d=$(window.activeLayout).find("[edit-style="+b+"]");vb(".colorPicker"+a,d.css("background-color")),d.closest("[edit-hideable]").is("[edit-hideable]")&&($(".colorPicker"+a).find(".panel-option").append('<div class="hideButton">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="label">Button : Show/Hide</div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="button-slide" id="'+b+'"></div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>'),yb(".colorPicker"+a)),d.is("[effect-all='true']")&&$(".colorPicker"+a).find(".effect-all").addClass("effect-all-active"),d.is("[edit-button-radius]")&&(radius_value=d.is("[style]")?d.prop("style").borderRadius:"0px",$(".colorPicker"+a).find(".panel-option").append('<div class="redius-slider">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="label-slide">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="radius_name">Radius Button</div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="radius_value">'+radius_value+'</div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="slider-item">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="slider-bar" id="slider-'+b+'"></div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>'),Ab(".colorPicker"+a))}),nb(".link-color"),mb(".effect-all"),labelArr=[]}function mb(a){$(a).click(function(b){if($(b.target).is(a)){var c=$(this).parent().find(".form-item > label").text().replace(/\s/g,"_");$(this).is(".effect-all-active")?($(this).removeClass("effect-all-active"),$(".area-template").find("[edit-style~='"+c+"']").attr("effect-all","false")):($(this).addClass("effect-all-active"),$(".area-template").find("[edit-style~='"+c+"']").attr("effect-all","true"))}})}function nb(a){pb(a),$(a).click(function(b){if($(b.target).is(a)){if("link-color unlink"==$(this).attr("class"))$(this).removeClass("unlink"),$(this).addClass("link"),$(this).parent().addClass("link_connect"),labelArr.push($("."+ob(this)[1]+" label").html());else{$(this).removeClass("link"),$(this).addClass("unlink"),$(this).parent().removeClass("link_connect");var c=$("."+ob(this)[1]+" label").html();labelArr=jQuery.grep(labelArr,function(a){return a!=c})}pb(this)}})}function ob(a){return str_class=$(a).parent().attr("class").split(" "),str_picker=String(str_class).split(","),str_picker}function pb(a){$(a).css({top:20-$(a).height()/2,left:$(".colorTemp").width()/2-$(a).width()/2})}function qb(a){return!/-|\s/.test(a)}function rb(a){$(a).find(".panel-option").slideToggle(function(){I(!0)}),$(a+">.form-item").css({cursor:"pointer"}),$(a+">.form-item").click(function(b){$(a).hasClass("activeToggle")?($(b.target).is(".form-item")||$(b.target).is("#color"))&&($(".activeToggle").find(".panel-option").slideToggle(),$(".activeToggle").removeClass("activeToggle")):($(b.target).is(".form-item")||$(b.target).is("#color"))&&($(".activeToggle").find(".panel-option").slideToggle(),$(".activeToggle").removeClass("activeToggle"),$(a).addClass("activeToggle"),$(a).find(".panel-option").slideToggle()),$(a).find(".panel-option").css({"background-color":"#2d3b49"})})}function vb(a,b){$(a).hasClass("activeToggle")?a=$(a).hasClass("link_connect")?".link_connect":".activeToggle":$(a).hasClass("link_connect")&&(a=".link_connect"),obj=$.farbtastic(a+" #picker"),d_color=Kb(b),c_color=$(a+" #color"),c_color.val(d_color),wb(a,c_color.val()),$.farbtastic(a+" #picker").setColor(c_color.val()),$.farbtastic(a+" #picker").linkTo(function(b){wb(a,b)}),c_color.on("input",function(){$.farbtastic(a+" #picker").setColor($(this).val())})}function wb(a,b){$(a).hasClass("activeToggle")?a=$(a).hasClass("link_connect")?".link_connect":".activeToggle":$(a).hasClass("link_connect")&&(a=".link_connect"),obj=$.farbtastic(a+" #picker"),$.farbtastic(a+" #picker").setColor(b),rgb=obj.unpack(b),hsl=obj.RGBToHSL(rgb),$(a+" input").attr("autocomplete","off"),$(a+" input").css({"background-color":b,color:hsl[2]>.5?"#000":"#fff"}),$(a+" #color").val($.farbtastic(a+" #picker").color),$(a).hasClass("activeToggle")&&$(".activeToggle").hasClass("link_connect")?labelArr.length>=1&&$.each(labelArr,function(c,d){xb($(a),d,b)}):xb($(a),$(a+" label").text(),b)}function xb(a,b,c){var d=String(b).replace(/\s/g,"_");$(a).find(".effect-all").is(".effect-all-active")?$(".area-template").find("[edit-style~='"+d+"']").each(function(){$(this).is("[effect-all='true']")&&$(this).styleHooks("background-color",c),$(window.activeLayout).find("[edit-style~='"+d+"']").each(function(){$(this).styleHooks("background-color",c)})}):$(window.activeLayout).find("[edit-style~='"+d+"']").each(function(){$(this).styleHooks("background-color",c)})}function yb(a){var b=$(a).find(".button-slide").attr("id"),c=$(window.activeLayout).find("[edit-style~='"+b+"']").closest("[edit-hideable]").css("display");$("#"+b).ToggleMenuSlide({textOn:"ON",textOff:"OFF",show:"on",show:"none"==c?"off":"on",clickOn:function(a,b){$(".activeToggle").is(".link_connect")&&$(".activeToggle").find(".button-slide").is(".button-slide")?$(".activeToggle , .link_connect").find(".button-slide").each(function(b,c){zb($(c).attr("id"),""),$("#"+$(c).attr("id")).ToggleMenuSlideSetShow(a)}):zb($(b).attr("id"),"")},clickOff:function(a,b){$(".activeToggle").is(".link_connect")&&$(".activeToggle").find(".button-slide").is(".button-slide")?$(".activeToggle , .link_connect").find(".button-slide").each(function(b,c){zb($(c).attr("id"),"none"),$("#"+$(c).attr("id")).ToggleMenuSlideSetShow(a)}):zb($(b).attr("id"),"none")}})}function zb(a,b){$(window.activeLayout).find("[edit-style~='"+a+"']").closest("[edit-hideable]").css({display:b})}function Ab(a){slider_em="#"+$(a).find(".slider-bar").attr("id"),$(slider_em).slider({orientation:"horizontal",range:"min",min:1,max:24,value:parseInt($(a).find(".radius_value").text().split("px",1)),slide:function(a,b){$(".activeToggle").is(".link_connect")&&$(".activeToggle").find(".slider-bar").is(".slider-bar")?$(".activeToggle , .link_connect").find(".slider-bar").each(function(a,c){Bb($(c).attr("id"),b)}):Bb($(this).attr("id"),b),$(".activeToggle").find(".radius_value").text(b.value+"px")},stop:function(a,b){$(".activeToggle").is(".link_connect")&&$(".activeToggle").find(".slider-bar").is(".slider-bar")&&$(".link_connect").find(".slider-bar").each(function(a,c){$(".activeToggle").find(".slider-bar").attr("id")!=$(c).attr("id")&&($(c).closest(".link_connect").find(".radius_value").text(b.value+"px"),$(c).slider({value:b.value}))})}})}function Bb(a,b){var c=$(window.activeLayout).find("[edit-style~='"+String(a).split("-",2)[1]+"']");$(c).css($(c).attr("edit-button-radius"),b.value)}function Cb(){$("#sortable").on("mouseenter","img",function(a){return a.preventDefault(),Db(a),!1}),$("#sortable").on("mouseleave","img",function(a){return a.preventDefault(),$(a.relatedTarget).hasClass("edit-img")||Eb(),obj_duplicate=$(this).closest("[edit-duplicate]"),$(obj_duplicate).is(".area-box")||(pad=Na(obj_duplicate,!0)),window.activeSection=$(this).closest("[selector=select]"),!1})}function Db(a){_this=a.target,$(a.target).is("img")&&(obj_duplicate=$(_this).closest("[edit-duplicate]"),$(obj_duplicate).is(".area-box"),Xa($(_this).closest("[selector=select]")),Wa($(_this).closest("[selector=select]"),!0),$(_this).closest("td").attr("edit-img",""),$(_this).closest("td").css({position:"relative"}),$(".edit-img").is(".edit-img")||$(_this).closest("[edit-img]").append('<div class="edit-img" disabled="true"></div>'),$(".edit-img").css({top:$(_this).height()/2-$(".edit-img").height()/2+$(_this).position().top,left:$(_this).width()/2-$(".edit-img").width()/2+$(_this).position().left}),$(".edit-img").unbind(),$(".edit-img").bind({mouseenter:Fb,mouseleave:Gb,click:Hb}),window.activeSection=$(_this).closest("[selector=select]"),obj_duplicate=$(_this).closest("[edit-duplicate]"),$(obj_duplicate).is(".area-box")||(pad=Na(obj_duplicate,!0)))}function Eb(){$(".edit-img").remove(),$("[edit-img]").removeAttr("edit-img")}function Ib(a){$(a).find("[preview-bg]").is("[preview-bg]")?$(a).find("[preview-bg]").RookieEditorImg({imgType:"background-image",isID:b,isShow:c,callback:function(a){a&&xa()}}):console.log('No have attribute "preview-bg"')}function Kb(a){return a=a.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i),a&&4===a.length?"#"+("0"+parseInt(a[1],10).toString(16)).slice(-2)+("0"+parseInt(a[2],10).toString(16)).slice(-2)+("0"+parseInt(a[3],10).toString(16)).slice(-2):""}function Lb(){$("#sortable > li").each(function(){$(this).css({border:"0px dashed #dfb718"})})}domain=window.parent.location.origin,pathURL=window.parent.location.pathname,urlDemo=$(window.parent.document).find(".nav_purchase a").attr("href"),fullurl=domain+pathURL.split("build")[0],testSystem=!1,conIfram=$(window.parent.document).find(".container-ifram");var b=$(conIfram).attr("istype"),c=$(".area-template .item").attr("id"),d=$(conIfram).attr("tempName");$(conIfram).removeAttr("istype"),$(".area-template .item").removeAttr("id"),$(conIfram).removeAttr("tempName"),preview_T=!1,setEC=!1,$(window.parent.document).find(".account").hover(function(){$(window.parent.document).find(".float_profile").addClass("float_show")},function(){$(window.parent.document).find(".float_profile").removeClass("float_show")}),jQuery.fn.htmlCleaner=function(){return this.contents().filter(function(){return 3!=this.nodeType?($(this).htmlCleaner(),!1):!/\S/.test(this.nodeValue)}).remove(),this},jQuery.fn.cleanWhitespace=function(){return textNodes=this.contents().filter(function(){return 3==this.nodeType&&!/\S/.test(this.nodeValue)}).remove(),this},$(window).resize(function(){qa(),!0===setEC&&fb(),$(".area").css({width:"100%"})}),String.prototype.deleteQuotFromBGURL=function(a){var b=this;return b=b.replace(/url\((&quot;|").+?(&quot;|")\)/g,function(a){return a.replace(/(&quot;|")/g,"")}),b.replace(/&quot;/g,"'")},jQuery.fn.wrapLink=function(a,b){var c=new RegExp(a,"gi");return this.each(function(){this.innerHTML=this.innerHTML.replace(c,function(a){return"<"+b+' style="text-decoration: none !important; ">'+a+"</"+b+">"});var a=$(this).find(b).closest("span").is("span")?$(this).find(b).closest("span").css("color"):$(this).find(b).closest("td").css("color");$(this).find(b).css({color:a})})},jQuery.fn.wrapTag2=function(a,b){var c=new RegExp(a,"gi");return this.each(function(){$(this).contents().filter(function(){return c.test($(this).text())}).replaceWith(function(){return this.innerHTML.replace(c,function(a){return"<"+b+' style="text-decoration: none !important; ">'+a+"</"+b+">"})});var a=$(this).find(b).closest("span").is("span")?$(this).find(b).closest("span").css("color"):$(this).find(b).closest("td").css("color");$(this).find(b).css({color:a}),$(this).find(b).closest("a").contents().unwrap()})},jQuery.fn.wrapTag3=function(a,b){new RegExp(a,"gi");return this.each(function(){this.innerHTML+=$(this).text().replace(a,"<"+b+' style="text-decoration: none !important; ">'+a+"</"+b+">")})},jQuery.fn.wrapTag=function(a,b){var c=new RegExp(a,"gi");return this.each(function(){this.innerHTML=this.innerHTML.replace(c,function(a){return"<"+b+' style="text-decoration: none !important; ">'+a+"</"+b+">"});var a=$(this).find(b).closest("span").is("span")?$(this).find(b).closest("span").css("color"):$(this).find(b).closest("td").css("color");$(this).find(b).css({color:a}),$(this).find(b).closest("a").contents().unwrap()})},jQuery.fn.findTextMatch=function(a){return new RegExp(a,"gi").test($(this).text())},String.prototype.setImageURL=function(a){var b=this;return b=b.replace(/images\//g,function(a){return"../../"+imagePath+"/"})},jQuery.fn.beautifyHTML=function(){return this.contents().filter(function(){return 3!=this.nodeType?($(this).beautifyHTML(),!1):($("\x3c!-- akedodee --\x3e").insertAfter(this),this)}).remove(),this},jQuery.fn.checkHasAttr=function(a,b,c){if(c){"outside_box"!=c||$(this).find(a).is("[edit-style=outside_box]")||$(this).find(a).attr("edit-style","outside_box");var d=b+'="'+c+'"',e=new RegExp(d,"gi"),f=$(this).find(a).html();e.test(f)||$(this).find(a).attr(b,c)}else $(this).find(a).attr(b,c)};var Ja=function(a){a.preventDefault(),Eb(),Ka(this,!1),wc=this;var b=Math.floor(parseInt($(wc).css("font-size")));$(wc).css("font-weight");return $(wc).find("span").is("span")||$(wc).wrapInner(function(){return""!=this.textContent&&"<span></span>"}),$(wc).find("span , a").each(function(){$(this).is("span")?$(this).is("span[style*=font-size]")?$(this).css({"font-size":$(this).css("font-size")}):$(this).css({"font-size":b}):$(this).is("a")&&$(this).css({"font-size":"","font-weight":""})}),$("#sortable").sortable({disabled:!0,cursor:"text"}),$(".circle-button-add , .circle-button-remove , .border-duplicate , .area-button , .border-duplicate , .area-button").remove(),$(a.target).is(".circle-button-add")||$(a.target).is(".circle-button-remove")||$(a.target).is(".border-duplicate")||$(a.target).is(".area-button")||Va(this,a),Za($(".area-template")),!1},La=function(a){return a.preventDefault(),$(a.target).is("img")&&Db(a),Za($(".area-template")),$(this).css({outline:"1px dashed #8E8E8E",cursor:"text"}),obj_duplicate=$(this).closest("[edit-duplicate]"),$(obj_duplicate).is(".area-box")||(pad=Na(obj_duplicate,!0)),Xa($(this).closest("[selector=select]")),window.activeSection=$(this).closest("[selector=select]"),!1},Ma=function(a){return a.preventDefault(),Eb(),obj_duplicate=$(this).closest("[edit-duplicate]"),$(obj_duplicate).is(".area-box"),$(this).css({outline:""}),$("#sortable").sortable({disabled:!1,cursor:"move"}),window.activeSection=$(this).closest("[selector=select]"),!1};$(document).on("mouseenter",".area-button",function(a){pad=Na($(".area-box"),!0)}),$(document).on("mouseleave",".area-button",function(a){obj_duplicate=$(".area-box"),$(obj_duplicate).is(".area-box")&&(pad=Na(obj_duplicate,!1))});var Oa=function(a){a.preventDefault(),$(a.target).closest(".area-box").is(".area-box")||Na($(this),!0)},Pa=function(a){a.preventDefault(),a.target},Qa=function(a){var b=$(".area-box").closest("[selector]"),c=$(".area-box").find("[edit-style]").attr("edit-style");if($(this).is(".circle-button-add")){$(".area-box").clone().insertAfter($(".area-box"));$(".area-template").find(".border-duplicate").remove(),$(".area-template").find(".area-button").remove(),$(".area-template").find(".area-box").removeClass("area-box"),Ra(b,c),xa(),K(!1),v($("#menu_container .menu[title='Choose Module']"),"Choose Module")}else $(this).is(".circle-button-remove")&&($(".area-box").remove(),$(".area-template").find(".area-button").remove(),Ra(b,c),xa(),K(!1),v($("#menu_container .menu[title='Choose Module']"),"Choose Module"));return!1},Sa=function(a){return obj_duplicate=$(this).closest("[edit-duplicate]"),$(obj_duplicate).is("[edit-duplicate]")&&(pad=Na(obj_duplicate,!0)),!1},Ta=function(a){return obj_duplicate=$(this).closest("[edit-duplicate]"),$(obj_duplicate).is("[edit-duplicate]")&&(pad=Na(obj_duplicate,!0)),!1};Array.prototype.matchWebfont=function(a){for(var b=new RegExp(a,"gi"),c=0;c<this.length;c++)if(b.test(this[c].replace(/([\+])/g," "))){var d=this[c].replace(/(http|https):\/\/fonts\.googleapis\.com\/css\?family=/gi,"")+"|";if(linkFonts+=d,$(".con-style").find("link").length)$(".con-style").find("link").attr("href","http://fonts.googleapis.com/css?family="+linkFonts.replace(/\|$/gi,"")+"&subset=latin,cyrillic,greek");else{var e='<link href="http://fonts.googleapis.com/css?family='+linkFonts.replace(/\|$/gi,"")+'&subset=latin,cyrillic,greek" rel="stylesheet" type="text/css">';$(".con-style").append(e)}}};var Fb=function(a){return a.preventDefault(),obj_duplicate=$(this).closest("[edit-duplicate]"),$(obj_duplicate).is(".area-box")||(pad=Na(obj_duplicate,!0)),!1},Gb=function(a){return a.preventDefault(),obj_duplicate=$(this).closest("[edit-duplicate]"),$(obj_duplicate).is(".area-box")||(pad=Na(obj_duplicate,!0)),$(".edit-img").remove(),$(this).removeAttr("edit-img"),!1},Hb=function(a){return a.preventDefault(),$(".border-text-float,.border-element-float,.circle-button-add,.circle-button-remove,.button ,.border-duplicate , .area-button").remove(),$(".area-template").find(".area-box").removeClass("area-box"),Za($(this).closest("[selector=select]")),$(this).closest("[edit-img]").find("img").RookieEditorImg({imgType:"image",isID:b,isShow:c}),$(".edit-img").remove(),$(this).removeAttr("edit-img"),!1};$(document).on("mouseenter",".area",function(a){Za(window.activeSection),Lb(),$(".area-template").find(".area-box").removeClass("area-box"),$(".border-text-float,.border-element-float,.circle-button-add,.circle-button-remove,.button , .border-duplicate , .area-button").remove()}),function(a){a.fn.inlineStyle=function(a){return this.is("[style]")?this.prop("style")[a]:""}}(jQuery),$.fn.reverse=function(){return this.pushStack(this.get().reverse(),arguments)},$.each(["prev","next"],function(a,b){$.fn[b+"ALL"]=function(a){var c=$("body").find("*").andSelf();return c="prev"==b?c.slice(0,c.index(this)).reverse():c.slice(c.index(this)+1),a&&(c=c.filter(a)),c}}),String.prototype.filename=function(a){var b=this.replace(/\\/g,"/");return b=b.substring(b.lastIndexOf("/")+1),a?b.replace(/[?#].+$/,""):b},String.prototype.getStyleProp=function(){var a=String(this),b=a.replace(/\s/g,""),c=b.split(";").clean("");return $.grep(c,function(a,b){return a.search("background-color")},!0)[0]},$.fn.styleHooks=function(a,b){this.css(a,b);var c=this.css(a),d=this.attr("style");this.attr("style",d.replace(a+": "+c,a+": "+b))},$.fn.BGOutlookHooks=function(){if(this.hasBG=this.is("[style]")?this.prop("style")["background-image"]:"",this.hasBG)if(this.realURL=$(this).css("background-image").replace(/\"/g,""),this.css("background-image",this.realURL),this.cssStyle=this.prop("style"),this.hBG=this.outerHeight(),this.urlBG=this.cssStyle["background-image"].match(/^url\("?(.+?)"?\)$/)[1],this.posiBG=this.cssStyle.backgroundPosition?this.cssStyle.backgroundPosition:"50% 50%",this.cBG=this.cssStyle["background-color"]?Kb(this.cssStyle["background-color"]):"#333333",this.wBG="td"==this[0].localName?this.width():this.attr("width"),this.css({"background-image":""}),this.oldProp=$(this).attr("style"),this.attr("style","background:"+this.realURL+" no-repeat top center/cover; "+this.oldProp),this.cssStyle.background,"td"==this[0].localName)this.attr({background:this.urlBG,width:"100%",height:"100%"}),this.startVML='\x3c!--[if gte mso 9]>\t\t\t\t<v:rect xmlns:v="urn:schemas-microsoft-com:vml" fill="true" stroke="false" style="width:'+this.wBG+"px; height:"+this.hBG+'px; background-repeat:no-repeat;">\t\t\t\t<v:fill type="frame" color="'+this.cBG+'" src="'+this.urlBG+'" />\t\t\t\t<v:textbox style="mso-fit-text-to-shape:true; v-padding-auto:true;" inset="0,0,0,0" >\t\t\t\t<![endif]--\x3e',this.endVML="\x3c!--[if gte mso 9]>\t\t\t\t</v:textbox>\t\t\t\t</v:rect>\t\t\t\t<![endif]--\x3e",$(this.startVML).insertBefore(this.children()),$(this.endVML).insertAfter(this.children());else{var a="100%";$(this).find("td").each(function(){"20px"==$(this).prop("style")["padding-left"]&&"20px"==$(this).prop("style")["padding-right"]&&("560"==$(this).children("table").width()&&($(this).children("table").attr("width","560"),a=$(this).children("table").width(),$(this).children("table").css({"table-layout":"fixed"}),$(this).children("table").is("[class]")||$(this).children("table").addClass("full-width")),$(this).css({"padding-left":"","padding-right":""}))}),$(this).find("table").each(function(){$(this).width()}),this.attr({background:this.urlBG,width:this.wBG,height:this.hBG}),this.startVML='\x3c!--[if gte mso 9]>\t\t\t\t<tr><td valign="top" align="center">\t\t\t\t<v:rect xmlns:v="urn:schemas-microsoft-com:vml" fill="true" stroke="false" style="width:'+this.wBG+"px; height:"+this.hBG+'px; background-repeat:no-repeat;">\t\t\t\t<v:fill type="frame" color="'+this.cBG+'" src="'+this.urlBG+'" />\t\t\t\t<v:textbox style="mso-fit-shape-to-text:true; v-padding-auto:true;" inset="0,0,0,0" >\t\t\t\t<![endif]--\x3e',this.endVML="\x3c!--[if gte mso 9]>\t\t\t\t</v:textbox>\t\t\t\t</v:rect>\t\t\t\t</td></tr>\t\t\t\t<![endif]--\x3e",$(this.startVML).insertBefore(this.children()),$(this.endVML).insertAfter(this.children())}},Array.prototype.clean=function(a){for(var b=0;b<this.length;b++)this[b]==a&&(this.splice(b,1),b--);return this},$.fn.exists=function(a){var b=[].slice.call(arguments,1);return this.length&&a.call(this,b),this},l()});