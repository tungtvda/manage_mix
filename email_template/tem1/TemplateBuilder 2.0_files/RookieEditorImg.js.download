!function(a){function b(){i_data[0]=[],i_data[1]=[];var b=a(inifram).find(".all-img-library"),c=a(inifram).find(".all-img-template");a(b).find(".img-library").each(function(){i_data[0].push(a(this).find("img").attr("src").split("../../")[1])}),a(c).find(".img-library").each(function(){i_data[1].push(a(this).find("img").attr("src").split("../../")[1])})}function c(b){pathGetImage=pathURL.split("build").join("getImage"),createEditor?(i_data="",a.ajax({url:pathGetImage,type:"POST",data:{id:isID,demo:isShow},dataType:"json"}).done(function(a){i_data=a,d(".all-img-library",a[0]),d(".all-img-template",a[1])})):""!=i_data?(d(".all-img-library",i_data[0]),d(".all-img-template",i_data[1])):(createEditor=!0,c(b))}function d(b,c){a.each(c,function(d,e){imgShowUp='<li class="img-library">\t\t\t\t\t\t\t\t<div class="thumb-library">\t\t\t\t\t\t\t\t\t<div class="centered">\t\t\t\t\t\t\t\t\t\t<img  src="../../'+e+'">\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t</li>',a(inifram).find(b).append(imgShowUp),c.length-1==d&&f(a(inifram),b)})}function e(b){a(inifram).find(".nameFile").is(".nameFile")||a(inifram).append('<div class="nameFile"></div>'),a(inifram).find(".nameFile").css({top:-1e3}),a(b).mousemove(function(b){b.clientX<=a(inifram).find(".main-container").width()-(a(inifram).find(".nameFile").width()+30)?a(inifram).find(".nameFile").css({top:b.clientY+20,left:b.clientX+10}):a(inifram).find(".nameFile").css({top:b.clientY+20,left:b.clientX-a(inifram).find(".nameFile").width()-10})})}function f(b,c){a(b).find("#loader-wrapper").remove(),a(inifram).find(".main-container").css({opacity:1}),em=a(b).find(c),0==uploadActive&&t(em),a(em).find(".img-library").hover(function(){a(inifram).find(".nameFile").css({opacity:"0"}),e(this),a(this).addClass("current_select"),a(this).parent().is(".all-img-library")?a(this).append('<div class="border-blue"><div class="delete"></div></div>'):a(this).append('<div class="border-blue"></div>'),a(inifram).find(".nameFile").css({opacity:"0.7"});var b=this,c=v(a(this).find("img")),d=setInterval(function(){c.complete&&(clearInterval(d),a(inifram).find(".nameFile").html(decodeURIComponent(a(b).find("img").attr("src").filename())+"<br>"+c.width+"x"+c.height))},100);a(this).find(".delete").bind({click:r})},function(){a(this).find(".border-blue").remove(),a(inifram).find(".nameFile").css({opacity:"0"}),a(this).removeClass("current_select")}),a(em).find(".img-library").on("mouseenter",function(){}),a(em).find(".img-library").bind({click:q}),a(b).find(".upload-img , .insert-img , .library-img , .library-img-template , .preview-bg").click(function(){switch(h(a(this)),a(this).attr("class")){case"upload-img":i(".container-upload_image");break;case"insert-img":i(".container-insert_image"),n();break;case"library-img":i(".container-library"),g(".all-img-library",".all-img-template"),l();break;case"library-img-template":i(".container-library"),g(".all-img-template",".all-img-library"),l();break;case"preview-bg":i(".container-Background");break;default:i(".container-library"),l()}return!1})}function g(b,c){a(inifram).find(".container-library "+b).removeClass("hidden"),a(inifram).find(".container-library "+c).addClass("hidden")}function h(b){a(inifram).find(".nav-option a").each(function(){a(b).attr("class")==a(this).attr("class")?a(this).attr("id","active-nav"):a(this).removeAttr("id","active-nav")})}function i(b){a(inifram).find(".option-panal > div").each(function(){tx=a(this).attr("class"),txx=tx.split(" ",1),"container-nav"!=txx[0]&&(a(this).addClass("hidden"),a(inifram).find(b).removeClass("hidden"))})}function j(){uploaded=0,newPath=pathURL.split("build").join("buildassets/"),uploadPath=pathURL.split("build").join("imageUpload"),deletePath=pathURL.split("build").join("deleteImage"),imageArray=[],a(inifram).find("#upload-img").dropzone({url:uploadPath,acceptedFiles:"image/*",dictRemoveFile:"Remove",addRemoveLinks:!0,autoProcessQueue:!0,accept:function(a,b){myDropzone=this;var c=RegExp(/^.*\.(php|exe)/i);c.test(a.name)?myDropzone.removeFile(a):b()},init:function(){myDropzone=this,this.on("sending",function(a,b,c){c.append("id",isID),c.append("demo",isShow)}),this.on("complete",function(a){var b=RegExp(/^.*\.(php|exe)/i);b.test(a.name)&&myDropzone.removeFile(a)}),this.on("success",function(b,c){"error"!=c&&(b.serverId=c,imageArray.push(c),uploaded++,1==uploaded&&(a(inifram).find(".container-upload_image").prepend('<div class="btn-editor buttonUploadToLibrary">Update to Image Library</div>'),a(inifram).find(".buttonUploadToLibrary").click(k)))}),this.on("removedfile",function(b){uploaded--,a.ajax({type:"POST",url:deletePath,data:{removeFile:b.serverId,id:isID,demo:isShow},dataType:"text"}).done(function(b){imageArray=a.grep(imageArray,function(a){return a!=b})}),0==uploaded&&a(inifram).find(".buttonUploadToLibrary").remove()})}})}function k(b){var c=pathURL.split("build").join("updateImageToLibrary");a.ajax({url:c,type:"POST",data:{updateImage:imageArray,id:isID,demo:isShow},dataType:"json"}).done(function(b){myDropzone.removeAllFiles(),imageArray=[],i(".container-library"),uploadActive=!0,d(".all-img-library",b),g(".all-img-library",".all-img-template"),h(a(inifram).find(".library-img")),l()})}function l(){a(inifram).find(".border-blue-select").is(".border-blue-select")&&(thumb=a(inifram).find(".border-blue-select").closest(".img-library").find("img"),u(thumb))}function m(){a(inifram).find("#insert_image").on("input",function(b){ex=a(this).val();var c=RegExp("^((f|ht)tps?:)?//(?!"+location.host+")");p(ex),c.test(ex)})}function n(){if(""!=a(inifram).find("#insert_image").val())p(a(inifram).find("#insert_image").val());else{ex=a(inifram).find(".thumb-img > img").attr("src");var b=RegExp("^((f|ht)tps?:)?//(?!"+location.host+")");b.test(ex)&&(a(inifram).find("#insert_image").val(ex),p(a(inifram).find("#insert_image").val()))}}function o(a){ex=a;var b=RegExp("^((f|ht)tps?:)?//(?!"+location.host+")");return b.test(ex)}function p(b){var c=a(inifram).find(".container-insert_image img"),d=new Image;d.src=b,d.onerror=function(a){return c[0].src="",u(c),!0},d.onload=function(){c.attr("src",this.src);var b=a(inifram).find(".container-insert_image .img-external").width(),d=v(c);if(d.complete){var e=w(b,400,d),f=e.width,g=e.height;c.attr({width:f,height:g}),u(c)}}}function s(b){a(imageObject).closest(".area-template").find("[edit-bg]").each(function(){"none"!=a(this).css("background-image")&&(bgImgName1=a(this).css("background-image"),imgMatch1=bgImgName1.match(/^url\("?(.+?)"?\)$/),imgMatch1[1].filename()==b&&D(this))})}function t(b){var c=setInterval(function(){if(clearInterval(c),""!=a(inifram).find(".img-panal .fileName > p").text()){var d=a(inifram).find(".img-panal .thumb-img > img");a(b).find(".border-blue-select").remove(),a(b).find(".img-library img").each(function(){fullPathImage=window.parent.location.href.split("/build")[0]+"/"+a(this).attr("src").split("../../")[1],checkImageActive="background-image"==status?fullPathImage:a(this).attr("src"),d.attr("src")==checkImageActive&&(a(this).closest(".img-library").parent().is(".all-img-library")?(h(a(inifram).find(".library-img")),g(".all-img-library",".all-img-template")):(h(a(inifram).find(".library-img-template")),g(".all-img-template",".all-img-library")),a(this).closest(".img-library").insertBefore(a(b).children(":first")),a(this).closest(".img-library").append('<div class="border-blue-select"><div class="select"></div></div>'))})}else h(a(inifram).find(".library-img-template")),g(".all-img-template",".all-img-library")},300)}function u(b){var c=a(inifram).find(".img-panal  .inner").width();c=c>278?278:c;var d=v(b),e=setInterval(function(){if(d.complete){clearInterval(e);var f=w(c,200,d),g=f.width,h=f.height;a(inifram).find(".thumb-img > img").attr("src",a(d).attr("src")),a(inifram).find(".thumb-img").css({width:g,height:h}),a(inifram).find(".thumb-img > img").css("cssText","width:"+g+("auto"!=g?"px;":";")+" height:"+h+"px !important;");var i=a(inifram).find(".img-panal .fileSize > p"),j=a(inifram).find(".img-panal .resize-image  input#img-width"),k=a(inifram).find(".img-panal .resize-image  input#img-height"),l=a(inifram).find(".img-panal .resize-image  input#max-width");i.text("Original Size : "+d.width+"x"+d.height);var m=a(imageObject).is("[width]")?a(imageObject).attr("width"):a(imageObject).width();if(j.val(m),a(imageObject).is("[height]")||a(imageObject).is("[style*=height]")?(k.attr("type","text"),k.val(a(imageObject).attr("height"))):(k.attr("type","text"),k.val("auto")),l.val(parseInt(a(imageObject).css("max-width"))),max_w=parseInt(a(imageObject).css("max-width")),d.width>max_w){a(inifram).find(".img-panal .fileSizeRecomment").css({display:"block"});var n=a(inifram).find(".img-panal .fileSizeRecomment > span");n.html("width : "+max_w+" x height : free")}else a(inifram).find(".img-panal .fileSizeRecomment").css({display:"none"});var o=a(inifram).find(".img-panal .fileName > p");if(o.text(decodeURIComponent(d.src.filename())),a(b).attr("alt")){var p=a(inifram).find(".img-panal .fileAlt  input");p.val(a(b).attr("alt"))}BGImage&&a(inifram).find(".edit-background-Image .checkbox input").each(function(){a(this).is(":checked")&&A(a(this).attr("id"))})}else console.log("Load image fail"),clearInterval(e)},100)}function v(b){rm={width:0,height:0};var c=new Image;return"img"==a(b)[0].localName?"#"==a(b).attr("src").filename()?c.complete=!1:(c.src=a(b).attr("src"),a(c).error(function(a){return c.complete=!1,!1}),a(c).one("load",function(){rm.width=c.width,rm.height=c.height}).each(function(){this.complete&&a(this).load()})):imageBG_url&&(c.src=imageBG_url,a(c).one("load",function(){rm.width=c.width,rm.height=c.height}).each(function(){this.complete&&a(this).load()})),c}function w(a,b,c){var d=a,e=b,f={width:c.width,height:c.height};return f.width>d&&f.height>e?f.width/f.height*e<=d?(f.width="auto",f.height=e):(f.height="auto",f.width=d):f.width>d?(f.width=d,f.height="auto"):f.height>e&&(f.height=e,f.width="auto"),f}function x(b,c){a(b).find(".button-slide").find(".toggle-body").remove();var d=a(b).find(".button-slide").attr("id");a(b).find("#"+d).ToggleMenuSlide({textOn:"ON",textOff:"OFF",show:c,clickOn:function(c,d){img_show=c,a(b).find(".thumb-img > img").removeAttr("image-hide")},clickOff:function(c,d){img_show=c,a(b).find(".thumb-img > img").attr("image-hide","")}})}function y(b){a(inifram).find("#filter").keyup(function(){var c=a(this).val(),d=0;a(b).find(".img-library").each(function(){a(this).find("img").attr("src").filename().search(new RegExp(c,"i"))<0?a(this).addClass("hidden"):(a(this).removeClass("hidden"),d++)})})}function z(b,c){var d=[],e="";a.each(c,function(c,f){"full-width"==f?("true"==a(b).find("[full-width]").attr("full-width")&&(e="full-width"),d[c]="true"==a(b).find("[full-width]").attr("full-width")):d[c]="none"!=a(b).find("[edit-bg="+f+"]").css("background-image");var g=d[c]?'checked="checked"':"";a(inifram).find(".edit-background-Image").append('<div class="checkbox ">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span>'+f+' Container</span>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input id="'+f+'" type="checkbox" value="'+d[c]+'" '+g+">\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>"),a(inifram).find(".edit-background-Image .checkbox input").each(function(){"full-width"!=e&&a(this).is(":checked")&&(e=a(this).attr("id"))}),a(inifram).find("#"+f).change(function(){h(a(inifram).find(".preview-bg")),i(".container-Background"),e=a(this).attr("id"),A(e)})}),BGImage=!0,A(e)}function A(b){""!=b&&(active=a(inifram).find(".edit-background-Image .checkbox #"+b),a(active).is(":checked")?(a(active).attr("checked",!0),B(a(active).attr("id"))):(a(active).attr("checked",!1),C(a(active).attr("id"))),a(active).val(a(active).is(":checked")))}function B(b){a(inifram).find(".edit-background-Image .checkbox #"+b).attr("checked",!0),pathImage="url("+a(inifram).find(".thumb-img > img").attr("src")+")","full-width"==b?(a(inifram).find(".container-Background .previewTable ["+b+"]").attr(b,!0),a(inifram).find(".container-Background .previewTable ["+b+"]").css({"background-image":pathImage,"background-repeat":"no-repeat","background-position":"top,center","background-size":"cover"}),a(inifram).find(".edit-background-Image .checkbox input").each(function(){"full-width"!=a(this).attr("id")&&(a(this).attr("checked",!1),a(this).val(a(this).is(":checked")))}),a(inifram).find(".container-Background .previewTable [edit-bg]").each(function(){var b=a(this).is("[edit-style]")?a(this).attr("edit-style"):a(this).attr("save-edit-style");a(this).is("[full-width]")||(a(this).is("[save-color]")||(a(this).attr("save-color",a(this).css("background-color")),a(this).attr("save-edit-style",a(this).attr("edit-style")),a(this).removeAttr("edit-style"),a(this).css({"background-color":""})),a(this).css({"background-image":"","background-repeat":"","background-position":"","background-size":"","background-color":""}),a(this).removeAttr("background")),a(this).find("[edit-style="+b+"],[save-edit-style="+b+"]").each(function(){a(this).is("[save-color]")||(a(this).attr("save-color",a(this).css("background-color")),a(this).attr("save-edit-style",a(this).attr("edit-style")),a(this).removeAttr("edit-style"),a(this).css({"background-color":""}))})})):(a(inifram).find(".edit-background-Image .checkbox #full-width").is(":checked")&&(a(inifram).find(".edit-background-Image .checkbox #full-width").attr("checked",!1),a(inifram).find(".container-Background .previewTable [full-width]").attr("full-width",!1),a(inifram).find(".container-Background .previewTable [full-width]").css({"background-image":"","background-repeat":"","background-position":"","background-size":""}),a(inifram).find(".container-Background .previewTable [full-width]").removeAttr("background")),a(inifram).find(".edit-background-Image .checkbox input").each(function(){a(this).attr("id")!=b&&"full-width"!=a(this).attr("id")&&(a(this).attr("checked",!1),notActive=a(inifram).find(".container-Background .previewTable [edit-bg="+a(this).attr("id")+"]"),a(notActive).css({"background-image":"","background-repeat":"","background-position":"","background-size":""}),a(notActive).removeAttr("background"))}),a(inifram).find(".container-Background .previewTable [edit-bg="+b+"]").css({"background-image":pathImage,"background-repeat":"no-repeat","background-position":"top,center","background-size":"cover"}),a(inifram).find(".container-Background .previewTable [edit-bg]").each(function(){if(a(this).attr("edit-bg")==b){var c=a(this).is("[edit-style]")?a(this).attr("edit-style"):a(this).attr("save-edit-style");a(this).is("[full-width]")||a(this).is("[save-color]")||(a(this).attr("save-color",a(this).css("background-color")),a(this).attr("save-edit-style",c),a(this).removeAttr("edit-style"),a(this).css({"background-color":""})),a(this).find("[edit-style="+c+"],[save-edit-style="+c+"]").each(function(){a(this).is("[save-color]")||(a(this).attr("save-color",a(this).css("background-color")),a(this).attr("save-edit-style",a(this).attr("edit-style")),a(this).removeAttr("edit-style"),a(this).css({"background-color":""}))})}else{var c=a(this).is("[edit-style]")?a(this).attr("edit-style"):a(this).attr("save-edit-style");a(this).is("[save-color]")&&(a(this).css({"background-color":a(this).attr("save-color")}),a(this).attr("edit-style",a(this).attr("save-edit-style")),a(this).removeAttr("save-color"),a(this).removeAttr("save-edit-style")),a(this).find("[edit-style="+c+"],[save-edit-style="+c+"]").each(function(){a(this).is("[save-color]")&&(a(this).css({"background-color":a(this).attr("save-color")}),a(this).attr("edit-style",a(this).attr("save-edit-style")),a(this).removeAttr("save-color"),a(this).removeAttr("save-edit-style"))})}}))}function C(b){"full-width"==b?(a(inifram).find(".container-Background .previewTable ["+b+"]").attr(b,!1),a(inifram).find(".container-Background .previewTable ["+b+"]").css({"background-image":"","background-repeat":"","background-position":"","background-size":""}),a(inifram).find(".container-Background .previewTable ["+b+"]").removeAttr("background")):(a(inifram).find(".container-Background .previewTable [edit-bg="+b+"]").css({"background-image":"","background-repeat":"","background-position":"","background-size":""}),a(inifram).find(".container-Background .previewTable [edit-bg="+b+"]").removeAttr("background")),a(inifram).find(".container-Background .previewTable [edit-bg]").each(function(){var b=a(this).is("[edit-style]")?a(this).attr("edit-style"):a(this).attr("save-edit-style");a(this).is("[save-color]")&&(a(this).css({"background-color":a(this).attr("save-color")}),a(this).attr("edit-style",a(this).attr("save-edit-style")),a(this).removeAttr("save-color"),a(this).removeAttr("save-edit-style")),a(this).find("[edit-style="+b+"],[save-edit-style="+b+"]").each(function(){a(this).is("[save-color]")&&(a(this).css({"background-color":a(this).attr("save-color")}),a(this).attr("edit-style",a(this).attr("save-edit-style")),a(this).removeAttr("save-color"),a(this).removeAttr("save-edit-style"))})})}function D(b){a(b).is("[full-width]")&&a(b).attr("full-width",!1),a(b).css({"background-image":"","background-repeat":"","background-position":"","background-size":""}),a(b).removeAttr("background"),a(b).closest("[selector=select]").find("[edit-bg]").each(function(){var b=a(this).is("[edit-style]")?a(this).attr("edit-style"):a(this).attr("save-edit-style");a(this).is("[save-color]")&&(a(this).css({"background-color":a(this).attr("save-color")}),a(this).attr("edit-style",a(this).attr("save-edit-style")),a(this).removeAttr("save-color"),a(this).removeAttr("save-edit-style")),a(this).find("[edit-style="+b+"],[save-edit-style="+b+"]").each(function(){a(this).is("[save-color]")&&(a(this).css({"background-color":a(this).attr("save-color")}),a(this).attr("edit-style",a(this).attr("save-edit-style")),a(this).removeAttr("save-color"),a(this).removeAttr("save-edit-style"))})})}jQuery.fn.RookieEditorImg=function(d){var e=a.extend({},jQuery.fn.RookieEditorImg.setting,d);return status=e.imgType,isID=e.isID,isShow=e.isShow,uploadActive=!1,this.each(function(){var f=this;option=d;createEditor=!1,a(f).closest("body").find(".container-editor-img").is(".container-editor-img")?(createEditor=!1,a(f).closest("body").find(".container-editor-img").remove()):createEditor=!0;var k=document.createElement("div");a(k).css({position:"absolute","z-index":100}),k.className="container-editor-img",f.i=document.createElement("div"),f.i.className="iframe-img";var l='<div id="loader-wrapper"><div id="loader"></div></div>',p='<div class="main-container">\t\t\t\t<div class="img-panal">\t\t\t\t\t<div class="detail-panel">\t\t\t\t\t<div class="inner">\t\t\t\t\t\t<h3>IMAGE DETAIL</h3>\t\t\t\t\t\t<div class="thumb-img">\t\t\t\t\t\t\t<img src="" alt="">\t\t\t\t\t\t</div>\t\t\t\t\t\t<div class="fileName"><p></p></div>\t\t\t\t\t\t<div class="fileSize"><p>Normal Size : 125x250</p></div>\t\t\t\t\t\t<div class="resize-image">\t\t\t\t\t\t\t<span>Image Size</span>\t\t\t\t\t\t\t<label>\t\t\t\t\t\t\t\t<input id="img-width" type="number"  value="" placeholder="Width">\t\t\t\t\t\t\t\t<span>x</span>\t\t\t\t\t\t\t\t<input id="img-height" type="number"  value="auto" placeholder="Height" >\t\t\t\t\t\t\t</label>\t\t\t\t\t\t\t<span>Max-width</span>\t\t\t\t\t\t\t<label>\t\t\t\t\t\t\t\t<input id="max-width" type="number"  value="" placeholder="max-width" >\t\t\t\t\t\t\t</label>\t\t\t\t\t\t</div>\t\t\t\t\t\t<div class="fileSizeRecomment">\t\t\t\t\t\tImage size should be<br> \t\t\t\t\t\t<span style="font-weight:bold; font-size:15px;"> width : 0px height : free.</span>\t\t\t\t\t\t</div>\t\t\t\t\t\t<div class="fileAlt">\t\t\t\t\t\t<label>\t\t\t\t\t\t\t<span>Alt Text</span>\t\t\t\t\t\t\t<input type="text" value="image">\t\t\t\t\t\t</label>\t\t\t\t\t\t</div>\t\t\t\t\t\t<div class="fileLink">\t\t\t\t\t\t<label>\t\t\t\t\t\t\t<span>Link To</span>\t\t\t\t\t\t\t<input type="text" value="http://">\t\t\t\t\t\t</label>\t\t\t\t\t\t</div>\t\t\t\t\t\t<div class="imageShowHide">\t\t\t\t\t\t\t<span>Image : Show/Hide</span>\t\t\t\t\t\t\t<div class="button-slide" id="show-hide-image"></div>\t\t\t\t\t\t</div>\t\t\t\t\t\t<div class="edit-background-Image">\t\t\t\t\t\t</div>\t\t\t\t\t</div>\t\t\t\t\t</div>\t\t\t\t\t<div class=" button-panal">\t\t\t\t\t\t<div class="btn-editor buttonInsert">Save changes</div>\t\t\t\t\t\t<div class="btn-editor buttonCancel">Cancel</div>\t\t\t\t\t</div>\t\t\t\t</div>\t\t\t\t<div class="option-panal">\t\t\t\t\t<div class="container-nav">\t\t\t\t\t\t<div class="nav-option">\t\t\t\t\t\t\t<a class="upload-img">Upload File</a>\t\t\t\t\t\t\t<a class="insert-img">Insert From URL</a>\t\t\t\t\t\t\t<a class="library-img" id="active-nav">Images Library</a>\t\t\t\t\t\t\t<a class="library-img-template" >Images Template</a>\t\t\t\t\t\t\t<a class="preview-bg" >Preview Background-image</a>\t\t\t\t\t\t</div>\t\t\t\t\t</div>\t\t\t\t\t<div class="container-Background hidden" >\t\t\t\t\t\t<div class="inner-Background">\t\t\t\t\t\t</div>\t\t\t\t\t</div>\t\t\t\t\t<div class="container-library" >\t\t\t\t\t\t<div class="search-tab">\t\t\t\t\t\t<input id="filter" name="filter" size="40" placeholder="Search Image">\t\t\t\t\t\t</div>\t\t\t\t\t\t<div class="inner-library">\t\t\t\t\t\t\t<ul class="all-img-library hidden">\t\t\t\t\t\t\t</ul>\t\t\t\t\t\t\t<ul class="all-img-template hidden">\t\t\t\t\t\t\t</ul>\t\t\t\t\t\t</div>\t\t\t\t\t</div>\t\t\t\t\t<div class="container-insert_image hidden">\t\t\t\t\t\t<div class="inner-insert_image">\t\t\t\t\t\t\t<input id="insert_image" name="insert_image" size="40" placeholder="Insert image url">\t\t\t\t\t\t\t<div class="img-external"><img src="" ></div>\t\t\t\t\t\t</div>\t\t\t\t\t</div>\t\t\t\t\t<div class="container-upload_image hidden">\t\t\t\t\t\t<div class="inner-upload_image">\t\t\t\t\t\t\t<form action="upload.php" id="upload-img" method="post" class="dropzone" enctype="multipart/form-data">\t\t\t\t\t\t\t</form>\t\t\t\t\t\t</div>\t\t\t\t\t</div>\t\t\t\t</div>\t\t\t</div>';a(f).closest("body").append(k),a(k).append(f.i),a(k).find(".iframe-img").append(l),a(k).find(".iframe-img").append(p),imageObject=f,pathURL=window.parent.location.pathname,a(k).show(),a(k).css({position:"absolute","z-index":100}),inifram=a(k),a(inifram).find(".main-container").css({opacity:0}),a(k).find("*").unbind(),BGImage=!1;var q=a(inifram).find(".img-panal .resize-image  input");if(q.on("input",function(b){r=a(this).val(),a(this).attr("type","text")}),q.on("blur",function(b){if(a(this).is("#img-height"))if(""==a(this).val())a(this).attr("type","text"),a(this).val("auto");else{var c=RegExp(/^([0-9]*|auto)$/g);c.test(r)||a(this).val("auto")}else""==a(this).val()&&a(this).val(a(imageObject).width());a(this).is("#max-width")&&""==a(this).val()&&a(this).val(parseInt(a(imageObject).css("max-width")))}),"background-image"==status){a(".resize-image").remove(),BGName_arr=[],imageBG_url="",a(f).find("[edit-bg]").each(function(){"none"!=a(this).css("background-image")&&(a(this).removeAttr("background"),a(this).attr("style",function(b,c){var d=c.split(";"),e="";return d=a.grep(d,function(a){var b=RegExp(/background:/g);if(!b.test(a))return a}),a.each(d,function(a,b){e+=b+";"}),e}),imageBG=a(this).css("background-image"),imageBG_url=imageBG.match(/^url\("?(.+?)"?\)$/),imageBG_url[1]&&(imageBG_url=imageBG_url[1])),BGName_arr[0]="full-width",BGName_arr.push(a(this).attr("edit-bg")),BGName_arr=jQuery.unique(BGName_arr),a(f).find("[edit-bg]").each(function(){})}),a(inifram).find(".fileAlt,.fileLink,.imageShowHide ").remove(),htmlPreview=a(f).html(),tableHtml='<table class="previewTable" width="100%" align="center" border="0" cellspacing="0" cellpadding="0"></table>',a(inifram).find(".container-Background .inner-Background").append(tableHtml),a(inifram).find(".container-Background .inner-Background >.previewTable").append(htmlPreview),a(inifram).find("a").each(function(){a(this).attr("href")&&a(this).click(function(){return!1})}),u(this);var r=imageBG_url;o(r)&&(a(inifram).find("#insert_image").val(r),i(".container-insert_image"),h(a(inifram).find(".insert-img")),n()),z(a(inifram).find(".container-Background .inner-Background >.previewTable"),BGName_arr)}else{a(inifram).find(".edit-background-Image , .preview-bg").remove(),u(imageObject);var r=imageObject.src;o(r)&&(a(inifram).find("#insert_image").val(r),i(".container-insert_image"),h(a(inifram).find(".insert-img")),n())}if(c(a(inifram)),j(),y(a(k).find(".all-img-library")),y(a(k).find(".all-img-template")),m(),void 0==a(f).attr("image-hide")?(img_show="on",a(inifram).find(".thumb-img > img").removeAttr("image-hide")):(img_show="off",a(inifram).find(".thumb-img > img").attr("image-hide","")),x(inifram,img_show),a(".iframe-img").animate({opacity:1},500,"easeOutQuad"),a(f).closest("a").is("a")){var s=a(inifram).find(".img-panal .fileLink  input");s.val(a(f).closest("a").attr("href"))}else var s=a(inifram).find(".img-panal .fileLink  input");a(inifram).find(".fileAlt input").val(a(f).attr("alt")),a(inifram).find(".buttonCancel").click(function(c){c.target==this&&(b(),a(k).parent().find(".dz-hidden-input").remove(),a(k).find(".iframe-img").remove(),a(k).hide())}),a(inifram).find(".buttonCancel").hover(function(){a(inifram).find("#insert_image").blur()}),a(inifram).find(".buttonInsert").hover(function(){a(inifram).find("#insert_image").blur()}),a(inifram).find(".buttonInsert").click(function(c){if(c.target==this){var d=a(inifram).find(".thumb-img  img");if("background-image"!=status){a(s).addLink(f),a(f).attr("alt",a(inifram).find(".fileAlt input").val()),a(f).attr("src",a(d).attr("src")),a(f).removeAttr("data-mce-src");var g=a(inifram).find(".img-panal .resize-image  input#img-width"),h=a(inifram).find(".img-panal .resize-image  input#img-height"),i=a(inifram).find(".img-panal .resize-image  input#max-width");a(f).removeAttr("max-w"),a(f)[0].style.setProperty("display","block","important"),a(f).css("cssText",a(f).attr("style")+"max-width:"+parseInt(i.val())+"px; display: block !important;"),a(f).attr("width",g.val()),a(f).attr("height",h.val()),a(f).css({width:g.val(),height:h.val()}),a(f)[0].style.setProperty("width",g.val(),""),a(f)[0].style.setProperty("height",h.val(),""),"on"==img_show?(a(f).removeAttr("image-hide"),a(f).parent().find(".hide-image").remove()):(a(f).attr("image-hide",""),a(f).parent().append('<div class="hide-image" disabled="true"></div>'),m_t=-(a(f).parent().find(".hide-image").height()/2),m_l=-(a(f).parent().find(".hide-image").width()/2),a(f).parent().find(".hide-image").css({"margin-top":m_t,"margin-left":m_l}))}else a(f).html(a(inifram).find(".container-Background .inner-Background >.previewTable").html()),e.callback(!0);b(),a(k).parent().find(".dz-hidden-input").remove(),a(k).find(".iframe-img").remove(),a(k).hide()}})})},jQuery.fn.RookieEditorImg.setting={width:"80%",height:"80%",imgType:"image",isID:"",isShow:"",callback:function(){}},jQuery.fn.addLink=function(b){var c={objImg:b};a.extend({},c,b);return this.each(function(){""!=a(this).val()&&"http://"!=a(this).val()?a(c.objImg).closest("a").is("a")?a(c.objImg).closest("a").attr("href",a(this).val()):a(c.objImg).wrap('<a href="'+a(this).val()+'"></a>'):a(c.objImg).parent().is("a")&&a(c.objImg).parent().contents().unwrap()})};var q=function(b){return"border-blue"!=b.target.className&&"border-blue-select"!=b.target.className||(a(this).parent().find(".border-blue-select").each(function(){a(this).remove()}),a(b.currentTarget).is(".current_select")&&a(b.currentTarget).append('<div class="border-blue-select"><div class="select"></div></div>'),thumb=a(b.currentTarget).find("img"),u(thumb)),!1},r=function(b){if("delete"==b.target.className&&confirm("Are you sure you want to delete this file?.\n'Cancel' to stop, 'OK' to delete.")){var c=a(this).closest(".img-library"),d=a(c).find("img").attr("src").filename(),e=a(imageObject)[0].clientWidth,f=a(imageObject)[0].clientHeight,g="http://dummyimage.com/"+e+"x"+f+"/f0f0f0/000000.jpg";a(inifram).find(".nameFile").css({opacity:"0"}),deleteImgfromLibrary=pathURL.split("build").join("deleteImagefromLibrary"),a.ajax({type:"POST",url:deleteImgfromLibrary,data:{imgdel:d,id:isID,demo:isShow},dataType:"text"}).done(function(b){if("not delete"==b)alert("This image can't delete right now.");else{if(a(c).remove(),a(inifram).find(".thumb-img > img").attr("src").filename()==d){var e=a(inifram).find(".thumb-img > img");new Date;a(e).attr("src",g),p(g)}a(imageObject).closest(".area-template").find("img").each(function(){a(this).attr("src").filename()==d&&a(this).attr("src",g)}),s(d),"background-image"==status&&(a(inifram).find(".container-Background .previewTable img").each(function(){a(this).attr("src").filename()==d&&a(this).attr("src",g)}),a(inifram).find(".container-Background .previewTable [edit-bg]").each(function(){"none"!=a(this).css("background-image")&&(bgImgName2=a(this).css("background-image"),imgMatch2=bgImgName2.match(/^url\("?(.+?)"?\)$/),imgMatch2[1].filename()==d&&a(inifram).find(".edit-background-Image .checkbox input").each(function(){a(this).is(":checked")&&(a(this).attr("checked",!1),a(this).val(a(this).is(":checked")),C(a(this).attr("id")))}))}))}})}};String.prototype.filename=function(a){var b=this.replace(/\\/g,"/");return b=b.substring(b.lastIndexOf("/")+1),a?b.replace(/[?#].+$/,""):b.replace(/[?#].+$/,"")},a.expr[":"].external=function(b){var c=/^(\w+:)?\/\//,d=a(b).attr("src");return void 0!==d&&d.search(c)!==-1},a.expr[":"].internal=function(b){return void 0!==a(b).attr("src")&&!a.expr[":"].external(b)}}(jQuery);